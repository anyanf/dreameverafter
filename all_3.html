<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  DreamEverAfter
  
  </title>
  
  
  <link href="atom.xml" rel="alternate" title="DreamEverAfter" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
 
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site:www.dreameverafter.com ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="_self" href="index.html">Home</a></li>
        
        <li id=""><a target="_self" href="archives.html">Archives</a></li>
        
        <li id=""><a target="_self" href="tools.html">工具</a></li>
        
        <li id=""><a target="_self" href="about.html">About</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="https://google.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; DreamEverAfter</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
        
        <li><a target="_self" href="index.html">Home</a></li>
        
        <li><a target="_self" href="archives.html">Archives</a></li>
        
        <li><a target="_self" href="tools.html">工具</a></li>
        
        <li><a target="_self" href="about.html">About</a></li>
        

    <li><label>Categories</label></li>

        
            <li><a href="CS.html">CS</a></li>
        
            <li><a href="List.html">List</a></li>
        
            <li><a href="%E6%9D%82.html">杂</a></li>
         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
	$(function(){
		$('#menu_item_index').addClass('is_active');
	});
</script>
<div class="row">
	<div class="large-8 medium-8 columns">
		<div class="markdown-body home-categories">
		
			<div class="article">
                <a class="clearlink" href="17001875302773.html">
                
                  <h1>LeetCode 8 String to Integer (atoi)</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>Implement atoi which converts a string to an integer.</p>
<p>The function first discards as many whitespace characters as necessary until the first non-whitespace character is found. Then, starting from this character, takes an optional initial plus or minus sign followed by as many numerical digits as possible, and interprets them as a numerical value.</p>
<<<<<<< HEAD
<p>The string can contain additional characters after those that form the integral number, which are ignored and have no effect on the behavior of this function.</p>
<p>If the first sequence of non-whitespace characters in str is not a valid integral number, or if no such sequence exists because either str is empty or it contains only whitespace characters, no conversion is performed.</p>
<p>If no valid conversion could be performed, a zero value is returned.</p>
<p>Note:</p>
<p>Only the space character ' ' is considered as whitespace character.<br />
Assume we are dealing with an environment which could only store integers within the 32-bit signed integer range: [−231,  231 − 1]. If the numerical value is out of the range of representable values, INT_MAX (231 − 1) or INT_MIN (−231) is returned.</p>
<p>Example 1:</p>
<pre><code class="language-plain_text">Input: &quot;42&quot;
Output: 42
</code></pre>
<p>Example 2:</p>
<pre><code class="language-plain_text">Input: &quot;   -42&quot;
Output: -42
Explanation: The first non-whitespace character is '-', which is the minus sign.
             Then take as many numerical digits as possible, which gets 42.
</code></pre>
<p>Example 3:</p>
<pre><code class="language-plain_text">Input: &quot;4193 with words&quot;
Output: 4193
Explanation: Conversion stops at digit '3' as the next character is not a numerical digit.
</code></pre>
<p>Example 4:</p>
<pre><code class="language-plain_text">Input: &quot;words and 987&quot;
Output: 0
Explanation: The first non-whitespace character is 'w', which is not a numerical 
             digit or a +/- sign. Therefore no valid conversion could be performed.
</code></pre>
<p>Example 5:</p>
<pre><code class="language-plain_text">Input: &quot;-91283472332&quot;
Output: -2147483648
Explanation: The number &quot;-91283472332&quot; is out of the range of a 32-bit signed integer.
             Thefore INT_MIN (−231) is returned.
</code></pre>
<p>解：</p>
<pre><code class="language-cpp">/*
 * @lc app=leetcode id=8 lang=cpp
 *
 * [8] String to Integer (atoi)
 */
class Solution {
public:
    int myAtoi(string str) {
    long long result=0;
    // 输出整数的范围是[−2^31, 2^31 − 1]
    long long max = ((long long)1&lt;&lt;31)-1;
    long long min = 0 - (1 &lt;&lt; 31);
    bool sign = 0;  // 是否是负号
    bool start = 0; // 是否找到有效字符
    int len = str.size();
    for(int i=0;i&lt;len &amp;&amp; result &lt;= max ;++i)
    {
        if(start == 0)
        {
            if(str[i] == ' ') continue;
            else if(str[i] == '-')  {
                    sign = 1;
                    start = 1;
            }
            else if(str[i] == '+' )
                start = 1;
            else if(str[i] &gt;= '0' &amp;&amp; str[i] &lt;= '9')
            {
                start = 1;
                // 原结果*10 + 当前自负减去字符&quot;0“所得的偏移量即是所求数字
                result = result * 10 + (str[i] - '0');
            }
            else
                break;
        }
        else
        {
            if(str[i] &gt;= '0' &amp;&amp; str[i] &lt;= '9')
                result = result * 10 + (str[i] - '0');
            else break;
        }
    }
    result *= (sign)?-1:1;
    if(result &gt; max) 
        return max;
    else if(result &lt; min) 
        return min;
    return result;
    }

};

</code></pre>
=======
>>>>>>> b3ad68a (2023-11-26 23:56:08)

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
<<<<<<< HEAD
                  
                    <span class="date">2019/06/26</span>
=======
                   <a href="17001875302773.html">Read more</a>&nbsp;&nbsp; 
                    <span class="date">2019/06/26</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='LeetCode.html'>LeetCode</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="17001875302838.html">
                
                  <h1>LeetCode 6 ZigZag Conversion(Z字转换)</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>The string &quot;PAYPALISHIRING&quot; is written in a zigzag pattern on a given number of rows like this: (you may want to display this pattern in a fixed font for better legibility)</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                   <a href="17001875302838.html">Read more</a>&nbsp;&nbsp; 
                    <span class="date">2019/06/26</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='LeetCode.html'>LeetCode</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="17001875302640.html">
                
                  <h1>LeetCode 106 Construct Binary Tree from Inorder and Postorder Traversal(由中序和后序遍历建立二叉树)</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>Given inorder and postorder traversal of a tree, construct the binary tree.</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                   <a href="17001875302640.html">Read more</a>&nbsp;&nbsp; 
                    <span class="date">2019/06/24</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='LeetCode.html'>LeetCode</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="17001875302904.html">
                
                  <h1>LeetCode 5 Longest Palindromic Substring(最长回文字串)</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>Given a string s, find the longest palindromic substring in s. You may assume that the maximum length of s is 1000.</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                   <a href="17001875302904.html">Read more</a>&nbsp;&nbsp; 
                    <span class="date">2019/06/18</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='LeetCode.html'>LeetCode</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="17001892558986.html">
                
                  <h1>Objective-C Type Encodings</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>转自：<a href="https://nshipster.cn/type-encodings/">nshipster</a>，觉得再某些场景上有点用，就直接抄过来了。</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                   <a href="17001892558986.html">Read more</a>&nbsp;&nbsp; 
                    <span class="date">2019/04/30</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='OC.html'>OC</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="17001892556042.html">
                
                  <h1>Objective-C：为什么分类中不能直接添加属性</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>为什么分类中不能直接添加属性，这个也是一个经典的面试题了。</p>
<p>搜了一些相关文章，再结合源码做了一个小小的总结。</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                   <a href="17001892556042.html">Read more</a>&nbsp;&nbsp; 
                    <span class="date">2019/03/16</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='OC.html'>OC</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="17001265069165.html">
                
                  <h1>MeshLab</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>遇到了移植MeshLab到ARM平台的情景，后来研究了很久初步编译成功。</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                   <a href="17001265069165.html">Read more</a>&nbsp;&nbsp; 
                    <span class="date">2019/03/12</span>
>>>>>>> b3ad68a (2023-11-26 23:56:08)
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='LeetCode.html'>LeetCode</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
<<<<<<< HEAD
                <a class="clearlink" href="17001875302838.html">
                
                  <h1>LeetCode 6 ZigZag Conversion(Z字转换)</h1>
=======
                <a class="clearlink" href="17001875302970.html">
                
                  <h1>数据结构与算法解析习题2.23：实现对分查找使得在每次迭代中只有一个二路比较</h1>
>>>>>>> b3ad68a (2023-11-26 23:56:08)
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
<<<<<<< HEAD
                        	<p>The string &quot;PAYPALISHIRING&quot; is written in a zigzag pattern on a given number of rows like this: (you may want to display this pattern in a fixed font for better legibility)</p>
<pre><code class="language-plain_text">P   A   H   N
A P L S I I G
Y   I   R
</code></pre>
<p>And then read line by line: &quot;PAHNAPLSIIGYIR&quot;</p>
<p>Write the code that will take a string and make this conversion given a number of rows:</p>
<pre><code class="language-plain_text">string convert(string s, int numRows);
</code></pre>
<p>Example 1:</p>
<pre><code class="language-plain_text">Input: s = &quot;PAYPALISHIRING&quot;, numRows = 3
Output: &quot;PAHNAPLSIIGYIR&quot;
</code></pre>
<p>Example 2:</p>
<pre><code class="language-plain_text">Input: s = &quot;PAYPALISHIRING&quot;, numRows = 4
Output: &quot;PINALSIGYAHRPI&quot;
Explanation:

P     I    N
A   L S  I G
Y A   H R
P     I
</code></pre>
<p>解：</p>
<pre><code class="language-cpp">/*
 * @lc app=leetcode id=6 lang=cpp
 *
 * [6] ZigZag Conversion
 */
class Solution {
public:
    string convert(string s, int nRows) {
        if(nRows &lt;= 1) return s;
        string result = &quot;&quot;;

        /*
        P   A   H   N
        A P L S I I G
        Y   I   R

        P   | A   | H   | N
        A P | L S | I I | G
        Y   | I   | R   |
         */

        // 假设一个竖线和一个斜线（不包括斜线和下一个线的交集）是个循环
        // 那么循环的公式就是
        // cycle = (2*nRows - 2), nRows &gt; 1.
        int cycle = 2 * nRows - 2;
        for(int i = 0; i &lt; nRows; ++i)
        {
            for(int firstJ = i; firstJ &lt; s.length(); firstJ = firstJ + cycle){
                // firstJ为该行该循环的第一个字母index
               result = result + s[firstJ];
                // secondJ 该行该循环的第二个字母index
                // firstJ - i 当前循环开始的index
                // cycle - i  循环内同一行的第二个字母
               int secondJ = (firstJ - i) + cycle - i;
               if(i != 0 &amp;&amp; i != nRows-1 &amp;&amp; secondJ &lt; s.length())
                   result = result + s[secondJ];
            }
        }
        return result;
    }
};



</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2019/06/26</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='LeetCode.html'>LeetCode</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="17001875302640.html">
                
                  <h1>LeetCode 106 Construct Binary Tree from Inorder and Postorder Traversal(由中序和后序遍历建立二叉树)</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>Given inorder and postorder traversal of a tree, construct the binary tree.</p>
<p>Note:<br />
You may assume that duplicates do not exist in the tree.</p>
<p>For example, given</p>
<pre><code class="language-plain_text">inorder = [9,3,15,20,7]
postorder = [9,15,7,20,3]
</code></pre>
<p>Return the following binary tree:</p>
<pre><code class="language-plain_text">    3
   / \
  9  20
    /  \
   15   7
</code></pre>
<p>解：</p>
<pre><code class="language-cpp">
/*
 * @lc app=leetcode id=106 lang=cpp
 *
 * [106] Construct Binary Tree from Inorder and Postorder Traversal
 */
/**
 * Definition for a binary tree node.
 * struct TreeNode {
 *     int val;
 *     TreeNode *left;
 *     TreeNode *right;
 *     TreeNode(int x) : val(x), left(NULL), right(NULL) {}
 * };
 */
class Solution {
public:

    // 后序的最后一个节点为根节点，在中序遍历中找出根节点，根节点前的所有节点为左子树，根节点后的所有节点为右子树。
    // is inorder 的起始位置
    // ie inorder 的结束位置
    // ps postorder 的起始位置
    // pe postorder 的结束位置
    TreeNode* create(vector&lt;int&gt; &amp;inorder, vector&lt;int&gt; &amp;postorder, int is, int ie, int ps, int pe) {
        if(ps &gt; pe){
            return nullptr;
        }
        TreeNode* node = new TreeNode(postorder[pe]);
        int iRootS; // inorder 根节点位置
        for(int i = is; i &lt;= ie; i++){
            if(inorder[i] == node-&gt;val){
                iRootS = i;
                break;
            }
        }
        int leftMarginLen = iRootS - is - 1;  // 左位置间距长度，可0，即只有一个节点
        int rightMarginLen = ie - iRootS - 1; // 右位置间距长度，可0
        node-&gt;left = create(inorder, postorder, is, iRootS - 1, ps, ps + leftMarginLen);
        int pSubLen = pe - 1; //两个子树总节点长度
        node-&gt;right = create(inorder, postorder, iRootS + 1, ie, pSubLen - rightMarginLen, pSubLen);
        return node;
    }

    TreeNode *buildTree(vector&lt;int&gt; &amp;inorder, vector&lt;int&gt; &amp;postorder) {
        return create(inorder, postorder, 0, inorder.size() - 1, 0, postorder.size() - 1);
    }

};

</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2019/06/24</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='LeetCode.html'>LeetCode</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="17001875302904.html">
                
                  <h1>LeetCode 5 Longest Palindromic Substring(最长回文字串)</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>Given a string s, find the longest palindromic substring in s. You may assume that the maximum length of s is 1000.</p>
<p>Example 1:</p>
<pre><code class="language-plain_text">Input: &quot;babad&quot;
Output: &quot;bab&quot;
Note: &quot;aba&quot; is also a valid answer.
</code></pre>
<p>Example 2:</p>
<pre><code class="language-plain_text">Input: &quot;cbbd&quot;
Output: &quot;bb&quot;
</code></pre>
<p>用的 Manacher 算法，如果对注释不太明白可以搜网上的图解。。</p>
<pre><code class="language-cpp">
class Solution
{

public:
    string longestPalindrome(string s)
    {
        // 马拉车算法
        if (s.empty())
            return &quot;&quot;;

        // 先处理一下字符串，给每个字符之间加入#，来解决对称位置的奇偶问题
        // 保证所有的串和回文串都是奇数长度    
        string prep = &quot;#&quot;;
        for (auto ch : s)
        {
            prep += ch;
            prep += &quot;#&quot;;
        }

        const int size_p = prep.size();
        // dp(i) 表示以 i 为中心的最长回文的半径
        vector&lt;int&gt; dp(size_p, 0);
    
        // bCur 是以 center 为中心，最长回文的右边界
        int center = 0, bCur = 0;
        for (int i = 0; i &lt; size_p; i++)
        {
            // 遍历是从左至右，所以
            // center一定小于等于i
            // 到i的时候，dp[mirror]是最长回文半径
            // mirror 是以 center 为中心，i的对称点
            int mirror = center - (i - center);

            // 这里分三种情况：
            // 1. dp[mirror] &gt; bCur - i,那么 dp[i] = bCur - i，否则的话以 center 为中心，到 bCur 的长度就不是最长回文半径了，与假设不符
            // 2. dp[mirror] &lt; bCur - i,那么 dp[i] = dp[mirror],根据 i 和 mirror 是以 center 为中心对称，且 dp[mirror] 在 center 为中心的回文之内，如果 dp[i] 比 dp[mirror] 更大的话，那么与 dp[mirror] 是最大回文前置条件不符
            // 3. dp[mirror] == bCur - i，那么 i 的最长回文至少是包含 mirror 的，即 dp[i] &gt;= dp[mirror]，所以还需要后面继续扩展 i 的回文长度的处理。
            dp[i] = bCur &lt;= i ? 0 : min(bCur - i, dp[mirror]);

            // 继续扩展 i 的回文长度，只有第三种情况的时候才有效，前两种情况必不满足 prep[start - 1] == prep[end + 1]
            int start = i - dp[i], end = i + dp[i];
            while (start - 1 &gt;= 0 &amp;&amp; end + 1 &lt; size_p &amp;&amp; prep[start - 1] == prep[end + 1])
            {
                --start;
                ++end;
                ++dp[i];
            }

            // 更新 center 和 bCur
            if (i + dp[i] &gt; bCur)
            {
                bCur = i + dp[i];
                center = i;
            }
        }
        center = max_element(dp.begin(), dp.end()) - dp.begin();
        return s.substr((center - dp[center]) / 2, dp[center]);
    }
};

</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2019/06/18</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='LeetCode.html'>LeetCode</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="17001892558986.html">
                
                  <h1>Objective-C Type Encodings</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>转自：<a href="https://nshipster.cn/type-encodings/">nshipster</a>，觉得再某些场景上有点用，就直接抄过来了。</p>
<p>@encode，@编译器指令 之一，返回一个给定类型编码为一种内部表示的字符串（例如，@encode(int) → i），类似于 ANSI C 的 typeof 操作。苹果的 Objective-C 运行时库内部利用类型编码帮助加快消息分发。</p>
<p>这里有一个所有不同的 Objective-C 类型编码的概要：</p>
<p>Objective-C Type Encodings</p>
<table>
<thead>
<tr>
<th><strong>编码</strong></th>
<th><strong>意义</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>c</code></td>
<td><code>A char</code></td>
</tr>
<tr>
<td><code>i</code></td>
<td><code>An int</code></td>
</tr>
<tr>
<td><code>s</code></td>
<td><code>A short</code></td>
</tr>
<tr>
<td><code>l</code></td>
<td><code>A longl is treated as a 32-bit quantity on 64-bit programs.</code></td>
</tr>
<tr>
<td><code>q</code></td>
<td><code>A long long</code></td>
</tr>
<tr>
<td><code>C</code></td>
<td><code>An unsigned char</code></td>
</tr>
<tr>
<td><code>I</code></td>
<td><code>An unsigned int</code></td>
</tr>
<tr>
<td><code>S</code></td>
<td><code>An unsigned short</code></td>
</tr>
<tr>
<td><code>L</code></td>
<td><code>An unsigned long</code></td>
</tr>
<tr>
<td><code>Q</code></td>
<td><code>An unsigned long long</code></td>
</tr>
<tr>
<td><code>f</code></td>
<td><code>A float</code></td>
</tr>
<tr>
<td><code>d</code></td>
<td><code>A double</code></td>
</tr>
<tr>
<td><code>B</code></td>
<td><code>A C++ bool or a C99 _Bool</code></td>
</tr>
<tr>
<td><code>v</code></td>
<td><code>A void</code></td>
</tr>
<tr>
<td><code>*</code></td>
<td><code>A character string (char *)</code></td>
</tr>
<tr>
<td><code>@</code></td>
<td><code>An object (whether statically typed or typed id)</code></td>
</tr>
<tr>
<td><code>#</code></td>
<td><code>A class object (Class)</code></td>
</tr>
<tr>
<td><code>:</code></td>
<td><code>A method selector (</code>SEL<code>)</code></td>
</tr>
<tr>
<td><code>[*array type*]</code></td>
<td><code>An array</code></td>
</tr>
<tr>
<td><code>{*name=type...*}</code></td>
<td><code>A structure</code></td>
</tr>
<tr>
<td><code>(*name*=*type...*)</code></td>
<td><code>A union</code></td>
</tr>
<tr>
<td><code>bnum</code></td>
<td><code>A bit field of *num* bits</code></td>
</tr>
<tr>
<td><code>^type</code></td>
<td><code>A pointer to type</code></td>
</tr>
<tr>
<td><code>?</code></td>
<td><code>An unknown type (among other things, this code is used for function pointers)</code></td>
</tr>
</tbody>
</table>
<p>当然，用图表很不错，但是用代码实践更好：</p>
<pre><code class="language-swift">NSLog(@&quot;int        : %s&quot;, @encode(int));
NSLog(@&quot;float      : %s&quot;, @encode(float));
NSLog(@&quot;float *    : %s&quot;, @encode(float*));
NSLog(@&quot;char       : %s&quot;, @encode(char));
NSLog(@&quot;char *     : %s&quot;, @encode(char *));
NSLog(@&quot;BOOL       : %s&quot;, @encode(BOOL));
NSLog(@&quot;void       : %s&quot;, @encode(void));
NSLog(@&quot;void *     : %s&quot;, @encode(void *));

NSLog(@&quot;NSObject * : %s&quot;, @encode(NSObject *));
NSLog(@&quot;NSObject   : %s&quot;, @encode(NSObject));
NSLog(@&quot;[NSObject] : %s&quot;, @encode(typeof([NSObject class])));
NSLog(@&quot;NSError ** : %s&quot;, @encode(typeof(NSError **)));

int intArray[5] = {1, 2, 3, 4, 5};
NSLog(@&quot;int[]      : %s&quot;, @encode(typeof(intArray)));

float floatArray[3] = {0.1f, 0.2f, 0.3f};
NSLog(@&quot;float[]    : %s&quot;, @encode(typeof(floatArray)));

typedef struct _struct {
    short a;
    long long b;
    unsigned long long c;
} Struct;
NSLog(@&quot;struct     : %s&quot;, @encode(typeof(Struct)));
</code></pre>
<p>结果：</p>
<table>
<thead>
<tr>
<th>类型</th>
<th><strong>编码</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>int</code></td>
<td><code>i</code></td>
</tr>
<tr>
<td><code>float</code></td>
<td><code>f</code></td>
</tr>
<tr>
<td><code>float *</code></td>
<td><code>^f</code></td>
</tr>
<tr>
<td><code>char</code></td>
<td><code>c</code></td>
</tr>
<tr>
<td><code>char *</code></td>
<td><code>*</code></td>
</tr>
<tr>
<td><code>BOOL</code></td>
<td><code>c</code></td>
</tr>
<tr>
<td><code>void</code></td>
<td><code>v</code></td>
</tr>
<tr>
<td><code>void *</code></td>
<td><code>^v</code></td>
</tr>
<tr>
<td><code>NSObject *</code></td>
<td><code>@</code></td>
</tr>
<tr>
<td><code>NSObject</code></td>
<td><code>#</code></td>
</tr>
<tr>
<td><code>[NSObject]</code></td>
<td><code>{NSObject=#}</code></td>
</tr>
<tr>
<td><code>NSError **</code></td>
<td><code>^@</code></td>
</tr>
<tr>
<td><code>int[]</code></td>
<td><code>[5i]</code></td>
</tr>
<tr>
<td><code>float[]</code></td>
<td><code>[3f]</code></td>
</tr>
<tr>
<td><code>struct</code></td>
<td><code>{_struct=sqQ}</code></td>
</tr>
</tbody>
</table>
<p>这里有一些特别需要注意的：</p>
<ul>
<li>指针的标准编码是加一个前置的 <code>^</code>，而 <code>char *</code> 拥有自己的编码 <code>*</code>。这在概念上是很好理解的，因为 C 的字符串被认为是一个实体，而不是指针。</li>
<li><code>BOOL</code> 是 <code>c</code>，而不是某些人以为的 <code>i</code>。原因是 <code>char</code> 比 <code>int</code> 小，且在 80 年代 Objective-C 最开始设计的时候，每一个 bit 位都比今天的要值钱（就像美元一样）。<code>BOOL</code> 更确切地说是 <code>signed char</code> （即使设置了 <code>-funsigned-char</code> 参数），以在不同编译器之间保持一致，因为 <code>char</code> 可以是 <code>signed</code> 或者 <code>unsigned</code>。</li>
<li>直接传入 <code>NSObject</code> 将产生 <code>#</code>。但是传入 <code>[NSObject class]</code> 产生一个名为 <code>NSObject</code>只有一个类字段的结构体。很明显，那就是 <code>isa</code> 字段，所有的 <code>NSObject</code> 实例都用它来表示自己的类型。</li>
</ul>
<h2><a id="%E6%96%B9%E6%B3%95%E7%BC%96%E7%A0%81" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>方法编码</h2>
<p>如苹果的 <a href="https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html">“Objective-C Runtime Programming Guide”</a> 中所提到的，有一大把内部使用的类型编码无法用 <code>@encode()</code> 返回。</p>
<p>以下是协议中声明的方法的类型修饰符：</p>
<p>Objective-C Method Encodings</p>
<table>
<thead>
<tr>
<th><strong>编码</strong></th>
<th><strong>意义</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>r</code></td>
<td><code>const</code></td>
</tr>
<tr>
<td><code>n</code></td>
<td><code>in</code></td>
</tr>
<tr>
<td><code>N</code></td>
<td><code>inout</code></td>
</tr>
<tr>
<td><code>o</code></td>
<td><code>out</code></td>
</tr>
<tr>
<td><code>O</code></td>
<td><code>bycopy</code></td>
</tr>
<tr>
<td><code>R</code></td>
<td><code>byref</code></td>
</tr>
<tr>
<td><code>V</code></td>
<td><code>oneway</code></td>
</tr>
</tbody>
</table>
<p>对于那些熟悉 <a href="https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDistantObject_Class/Reference/Reference.html">NSDistantObject</a> 的人，你无疑会认出这些是 <a href="https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DistrObjects/DistrObjects.html#//apple_ref/doc/uid/10000102i">Distributed Objects</a> 的残留。</p>
<p>尽管 DO (Distributed Objects) 在 iOS 时代已经不那么时髦了，它仍是用于 Cocoa 应用程序进程间通信的协议————甚至用于网络上的不同机器之间。在这些约束下，上下文里附加的内容就带来了很多好处。</p>
<p>例如，分页式的对象消息的参数默认是用代理传递的。在那些没必要用到低效的代理的情况下，增加一个 <code>bycopy</code> 修饰符以保证发送了一份完整的拷贝。同样，默认情况下，带用 <code>inout</code> 的参数表明它在发消息时对象即可传入又可传出。将参数特别标注为 <code>in</code> 或 <code>out</code>，程序将避免一些来回的开销。</p>
<hr />
<p>我们从对 Objective-C 的类型编码的全新理解上能得到什么呢？ 不瞒您说，其实没多少（除非你在做一些疯狂的元编程）。</p>
<p>但是就如我们最开始所说的，在追求破译密文的过程中要用到不少智慧。</p>
<p>看看类型编码为我们展现的有关 Objective-C 内部的细节，这本身就是一种高尚的追求。如果刨根问到底的话，我们需要了解一下 Distributed Objects 神秘的历史以及那 <a href="https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html%23jumpTo_22">至今仍然存在</a> 的复杂的参数修饰符。</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2019/04/30</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='OC.html'>OC</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="17001892556042.html">
                
                  <h1>Objective-C：为什么分类中不能直接添加属性</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>为什么分类中不能直接添加属性，这个也是一个经典的面试题了。</p>
<p>搜了一些相关文章，再结合源码做了一个小小的总结。</p>
<p>其实通过这个问题，也可以一瞥 OC 中类的实现。</p>
<h2><a id="%E6%BA%90%E7%A0%81" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>源码</h2>
<p>先晒一下OC类和分类的部分源码：</p>
<pre><code class="language-swift">typedef struct objc_class *Class;

struct objc_class : objc_object {
    // Class ISA;
    Class superclass;
    cache_t cache;             // formerly cache pointer and vtable
    class_data_bits_t bits;    // class_rw_t * plus custom rr/alloc flags

    ...
}


struct class_data_bits_t {
    ...

    class_rw_t* data() {
        return (class_rw_t *)(bits &amp; FAST_DATA_MASK);
    }

    ...
}

struct class_rw_t {
    // Be warned that Symbolication knows the layout of this structure.
    uint32_t flags;
    uint32_t version;

    const class_ro_t *ro;
    
    method_array_t methods;
    property_array_t properties;
    protocol_array_t protocols;

    Class firstSubclass;
    Class nextSiblingClass;

    char *demangledName;

    ...
}

struct class_ro_t {
    uint32_t flags;
    uint32_t instanceStart;
    uint32_t instanceSize;
#ifdef __LP64__
    uint32_t reserved;
#endif

    const uint8_t * ivarLayout;
    
    const char * name;
    method_list_t * baseMethodList;
    protocol_list_t * baseProtocols;
    const ivar_list_t * ivars;

    const uint8_t * weakIvarLayout;
    property_list_t *baseProperties;

    method_list_t *baseMethods() const {
        return baseMethodList;
    }
};
</code></pre>
<p>从上面可以看出来Objective-C类是由Class类型来表示的，它实际上是一个指向objc_class结构体的指针。<br />
ivars是objc_ivar_list（成员变量列表）指针，其在objc_class中关系如下。</p>
<pre><code class="language-swift">objc_class -&gt; class_data_bits_t bits -&gt; class_rw_t* data() -&gt; const class_ro_t *ro -&gt; const ivar_list_t * ivars;
</code></pre>
<p>再看一下Category的定义。</p>
<pre><code class="language-swift">typedef struct category_t *Category;

struct category_t {
    const char *name;
    classref_t cls;
    struct method_list_t *instanceMethods;
    struct method_list_t *classMethods;
    struct protocol_list_t *protocols;
    struct property_list_t *instanceProperties;
    // Fields below this point are not always present on disk.
    struct property_list_t *_classProperties;

    method_list_t *methodsForMeta(bool isMeta) {
        if (isMeta) return classMethods;
        else return instanceMethods;
    }

    property_list_t *propertiesForMeta(bool isMeta, struct header_info *hi);
};
</code></pre>
<p>从Category的定义也可以看出Category有实例方法，类方法，甚至可以实现协议，添加属性，但是没有实例变量。</p>
<h2><a id="%E5%88%86%E6%9E%90" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>分析</h2>
<p>参考了位博主文章之后，这里再补充一下。</p>
<p>博主文章链接：<a href="http://www.jianshu.com/p/935142af6a47">http://www.jianshu.com/p/935142af6a47</a></p>
<p>通过上面的文章里面的详细介绍以及打印输出，可以看到，在一个分类中添加了一个属性，Xcode不会自动的为其生成一个下划线开头的成员变量及set和get方法。</p>
<p>如果你没有手动的实现这两个方法，直接在外面通过点语法调用这个属性，肯定就直接挂了，Unrecognised selector send to instance。</p>
<p>因为他就没有这两个方法，能不挂吗？所以当你真的在分类中声明了一个属性的时候，就要手动的去实现这个属性的set和get方法，这个时候就要用到运行时机制了，关联上去这个属性的存取过程。</p>
<h2><a id="%E7%BB%93%E8%AE%BA" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>结论</h2>
<p>为什么不能为手动添加一个下划线开头的成员变量，然后在实现存取器方法的时候对这个成员变量来存取呢？非要用到所谓的运行时吗？</p>
<p>答案是因为：成员变量是一个类的东西，分类本身就不是一个类，它并没有自己的bits，以及后面的一些东西，分类本来就是OC里面通过运行时动态的为一个类添加的一些方法和属性等，不是一个真正的类，你怎么给他添加成员变量呢。</p>
<p>而因为在运行期，对象的内存布局已经确定，如果添加实例变量就会破坏类的内部布局，这对编译型语言来说是灾难性的。</p>
<p>总结一下，其实分类中是可以为一个类添加属性的，但是一定做不到添加成员变量，不要混淆了成员变量和属性的概念。</p>
<p>只是说现在Xcode自动会给属性生成成员变量让大家对这个概念有点混淆。Property是Property，Ivar是Ivar。</p>
<p>有兴趣可以研究一下类是怎么被创建出来的，类最开始生成了很多基本属性，比如IvarList，MethodList，分类只会将自己的method attach到主类，并不会影响到主类的IvarList。</p>
<p>这就是为什么分类里面不能增加成员变量的原因。</p>
<h2><a id="%E5%8F%82%E8%80%83" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>参考</h2>
<blockquote>
<p><a href="https://blog.csdn.net/JGL357/article/details/79127483">https://blog.csdn.net/JGL357/article/details/79127483</a><br />
<a href="https://www.jianshu.com/p/8aa63f7e98d1">https://www.jianshu.com/p/8aa63f7e98d1</a><br />
<a href="https://blog.csdn.net/mumuyinyin/article/details/72854579">https://blog.csdn.net/mumuyinyin/article/details/72854579</a><br />
<a href="https://tech.meituan.com/DiveIntoCategory.html">https://tech.meituan.com/DiveIntoCategory.html</a></p>
</blockquote>
=======
                        	<p>这个题目说每次迭代只有一个二路比较不太明确是什么意思，我觉得应该是只比较一次吧，那就把判断mid的逻辑放在迭代之后了。</p>
>>>>>>> b3ad68a (2023-11-26 23:56:08)

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
<<<<<<< HEAD
                  
                    <span class="date">2019/03/16</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='OC.html'>OC</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="17001265069165.html">
                
                  <h1>MeshLab</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>遇到了移植MeshLab到ARM平台的情景，后来研究了很久初步编译成功。</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                   <a href="17001265069165.html">Read more</a>&nbsp;&nbsp; 
                    <span class="date">2019/03/12</span>
=======
                   <a href="17001875302970.html">Read more</a>&nbsp;&nbsp; 
                    <span class="date">2019/03/06</span>
>>>>>>> b3ad68a (2023-11-26 23:56:08)
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90%E4%B9%A0%E9%A2%98.html'>数据结构与算法分析习题</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
<<<<<<< HEAD
                <a class="clearlink" href="17001875302970.html">
                
                  <h1>数据结构与算法解析习题2.23：实现对分查找使得在每次迭代中只有一个二路比较</h1>
=======
                <a class="clearlink" href="17001875303045.html">
                
                  <h1>数据结构与算法解析习题2.19：寻找主要元素 Majority Element</h1>
>>>>>>> b3ad68a (2023-11-26 23:56:08)
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
<<<<<<< HEAD
                        	<p>这个题目说每次迭代只有一个二路比较不太明确是什么意思，我觉得应该是只比较一次吧，那就把判断mid的逻辑放在迭代之后了。</p>
<p>也不知道这么理解对不对，希望有明白人给解解惑。。</p>
<pre><code class="language-c">
#include &lt;stdio.h&gt;


int BinarySearch( const int a[], int x, int n ) {
    int low, mid, high;

    low = 0;
    high = n - 1;

    mid = ( low + high ) / 2;

    while( ( low &lt;= high ) &amp;&amp;  ( a[mid] != x ) ) {
        if( a[mid] &gt; x ) {
            high = mid - 1;
            mid = ( low + high ) / 2;
        }
        else if( a[mid] &lt; x ) {
            low = mid + 1;
            mid = ( low + high ) / 2;
        }
    }

    if( a[mid] == x )
        return mid;
    else
        return -1;              // not found
}



int main() {

    int arr[5] = {3,5,6,7,8};

    printf(&quot;%d \n&quot;, BinarySearch(arr, 7, 5));

}

</code></pre>
=======
                        	<p>题干:大小为N的数组,其主元素是一个出现超过N/2的元素。</p>
>>>>>>> b3ad68a (2023-11-26 23:56:08)

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
<<<<<<< HEAD
                  
=======
                   <a href="17001875303045.html">Read more</a>&nbsp;&nbsp; 
>>>>>>> b3ad68a (2023-11-26 23:56:08)
                    <span class="date">2019/03/06</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90%E4%B9%A0%E9%A2%98.html'>数据结构与算法分析习题</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
<<<<<<< HEAD
                <a class="clearlink" href="17001875303045.html">
                
                  <h1>数据结构与算法解析习题2.19：寻找主要元素 Majority Element</h1>
=======
                <a class="clearlink" href="17001875303111.html">
                
                  <h1>数据结构与算法解析习题2.16：不用递归，写出快速求幂的程序</h1>
>>>>>>> b3ad68a (2023-11-26 23:56:08)
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
<<<<<<< HEAD
                        	<p>题干:大小为N的数组,其主元素是一个出现超过N/2的元素。</p>
<p>首先找出主元素的一个候选元,第二步确认该候选元是否为主元素。为找出数组A中的候选元,先构造一个数组B,比较A1和A2,如果相等,则放入到数组B中,然后比较A3和A4以此类推,直到比完整个数组A。然后递归地寻找数组B中的候选元,它也是数组A中的候选元。</p>
<h3><a id="%E5%88%86%E6%9E%90" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>分析</h3>
<p>首先, 这个算法只对偶数成立, 先证明一下算法的正确性:</p>
<p>比如N = 10, 主要元素是3，则3出现的次数&gt;=6</p>
<h4><a id="%E9%9C%80%E8%A6%81%E8%AF%81%E6%98%8E%E7%9A%84%E7%82%B91%EF%BC%9A6%E4%B8%AA3%E9%9A%8F%E6%9C%BA%E5%88%86%E5%B8%83%E5%9C%A8%E5%A4%A7%E5%B0%8F%E4%B8%BA10%E7%9A%84%E5%AE%B9%E5%99%A8%E4%B8%AD%EF%BC%8C%E5%BF%85%E5%AE%9A%E6%9C%89%E8%87%B3%E5%B0%911%E6%AC%A1%E7%9A%84%E8%BF%9E%E7%BB%AD%E4%B8%8B%E6%A0%87%E7%9A%842%E4%B8%AA%E5%85%83%E7%B4%A0%E5%9D%87%E4%B8%BA3%E3%80%82" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>需要证明的点1：6个3随机分布在大小为10的容器中，必定有至少1次的连续下标的2个元素均为3。</h4>
<pre><code class="language-plain_text">反证：任意2个3都不连续（也就是1次都没有）的极端情况是5个3依次被另一个元素隔开：3，1，3，1，3，1，3，1，3，1  所以用第6个3替换1的任意一个的位置，都会出现至少1次连续的2个3。
</code></pre>
<h4><a id="%E9%9C%80%E8%A6%81%E8%AF%81%E6%98%8E%E7%9A%84%E7%82%B92%EF%BC%9A%E8%BF%9E%E7%BB%AD%E7%9A%84%E4%B8%A4%E4%B8%AA3%E5%87%BA%E7%8E%B0%E7%9A%84%E4%BD%8D%E7%BD%AE%E4%B8%8B%E6%A0%87%EF%BC%8C%E5%BF%85%E5%AE%9A%E6%98%AFi-2%EF%BC%8Ci-2-1" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>需要证明的点2：连续的两个3出现的位置下标，必定是i<em>2，i</em>2+1</h4>
<pre><code class="language-plain_text">反证：任意2个连续的3的下标都是i*2+1，(i + 1) * 2的极端情况是：1，3，3，1，1，3，3，1，1，3  所以用第6个3替换1的任意一个的位置，都会出现至少1次连续的两个3出现的位置下标，必定是i*2，i*2+1  据此可以证明B数组中一定包含候选元.
</code></pre>
<h4><a id="%E9%9C%80%E8%A6%81%E8%AF%81%E6%98%8E%E7%9A%84%E7%82%B93%EF%BC%9Ab%E6%95%B0%E7%BB%84%E4%B8%AD%E5%80%99%E9%80%89%E5%85%83%E7%9A%84%E4%B8%AA%E6%95%B0%E5%87%BA%E7%8E%B0%E6%AC%A1%E6%95%B0-countb2" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>需要证明的点3：B数组中候选元的个数出现次数&gt;CountB/2</h4>
<pre><code class="language-plain_text">反证：如果B中候选元的个数出现次数&lt;=CountB/2，举个B的极端情况，3，3，3，1，2，4  根据“比较A1和A2，如果它们相等则取其中之一加到数组B中；否则什么都不做”规则反推A，A必定包含3，3，3，3，3，3，1，1，2，2，4，4(这些元素组成的数组我们定义为A的子数组A`，D后面可能还有其他元素，我们定义为A的子数组A``)，分情况讨论:

1：A``的元素个数为0，那么在A中3的个数 = CountA` / 2 + 0 / 2 = CountA/2，A中3的个数不满足&gt;CountA/2的条件。

2：A``的元素个数大于0，最好情况有1半都是3，（因为如果A``的3超过一半，根据证明1和证明2，B中必定会在现有元素基础上多出至少1个候选元3），此时A中3的个数 CountA` / 2+ CountA`` / 2 = CountA/2，A中3的个数不满足&gt;CountA/2的条件。
</code></pre>
<p>所以B数组中候选元的个数出现次数&gt;CountB/2。</p>
<h3><a id="%E9%97%AE%E7%AD%94" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>问答</h3>
<p>(1)、递归何时停止?<br />
当数组 B 中只有两个或更少的元素时递归便不必要了。<br />
(2)、数组A为奇数情况时如何处理?<br />
一种方法是，注意到如果前 N-1 个元素中有主要元素，则最后一个元素对结果没有影响，否则最后一个元素可能是候选元，将它作为候选元。<br />
(3)、题干所描述的算法的运行时间?<br />
设运行时间为 T(N)，有递推式 T(N)=T(N/2)+O(N)，解得 T(N)=O(N)<br />
(4)、如何避免使用附加数组B?<br />
保存一个数组 A 的拷贝后，可将要添加到数组 B 的元素直接覆盖在数组 A 上，每一级 递归均可这样做。最初的递归策略需要 O(logN)个数组，而这样只需要两个。<br />
(5)、给出题干所描述的算法代码?<br />
如下</p>
<pre><code class="language-c">
#include &lt;stdio.h&gt;

#define NotAMainCell -1

#define ARRLength 10


void swap (int *a, int *b) {

    int temp = *a;
    *a = *b;
    *b = temp;

}

int isMainCell(int arr[], int probablyMaincell) {

    int count = 0;

    for (int i = 0; i &lt; ARRLength; i++) {
        if (arr[i] == probablyMaincell) {
            count++;
        }
    }

    if (count &gt; ARRLength / 2) {
        return 1;
    } else {

        return 0;
    }
}

int findMainCell(int arr[], int length) {

    if (length == 0) {
        return NotAMainCell;
    }

    if (length == 1) {

        if (isMainCell(arr, arr[0]) == 1) {
            return arr[0];
        } else {
            return NotAMainCell;
        }
    }

    for (int i = 0, len = 0; i &lt; length; i = i + 2) {

        if (arr[i] == arr[i + 1]) {
            swap(&amp;arr[i], &amp;arr[len++]);
        }

        if (i == length - 1) {
            return findMainCell(arr, len);
        } else if (i == length - 2) {
            int resule = findMainCell(arr, len);

            if (resule == NotAMainCell) {

                if (isMainCell(arr, arr[ARRLength - 1]) == 1) {
                    return arr[ARRLength - 1];
                } else {
                    return NotAMainCell;
                }

            } else {
                return resule;
            }

        }
    }

    return NotAMainCell;
}



int main() {

    int arr[ARRLength] = {4,3,4,2,4,4,2,4,3,4};

    printf(&quot;%d \n&quot;, findMainCell(arr, ARRLength));

}

</code></pre>
<p>当然还有很多方法找到主元的，比如排序一下，那么index为n/2的元素，必然是主元。用hashmap。还有删除不同的一对元素等。。就不一一展开了。</p>
=======
                        	<p>用数组储存，x的1，2，4，8log2（n）次方，其实就是存x的2的数组index次方，储存下来。</p>
>>>>>>> b3ad68a (2023-11-26 23:56:08)

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
<<<<<<< HEAD
                  
=======
                   <a href="17001875303111.html">Read more</a>&nbsp;&nbsp; 
>>>>>>> b3ad68a (2023-11-26 23:56:08)
                    <span class="date">2019/03/06</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90%E4%B9%A0%E9%A2%98.html'>数据结构与算法分析习题</a></span>
<<<<<<< HEAD
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="17001875303111.html">
                
                  <h1>数据结构与算法解析习题2.16：不用递归，写出快速求幂的程序</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>用数组储存，x的1，2，4，8log2（n）次方，其实就是存x的2的数组index次方，储存下来。</p>
<p>然后把n转成2进制，转成2进制后，为1的位数，就是数组的index值，相应的元素，因为是求幂，所以这几个元素相乘。</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;math.h&gt;

#define MAXN 1000

int PowersOfXO[MAXN];

int main() {

    int x, n, cnt, i;
    int ans = 1;
    scanf(&quot;%d %d&quot;, &amp;x, &amp;n);
    cnt = (int)log2(n);
    PowersOfXO[0] = x;
    for (i = 1; i &lt;= cnt; i++)
    {
        PowersOfXO[i] = PowersOfXO[i - 1] * PowersOfXO[i - 1];
    }
    i = 0;
    while (n &gt; 0) {//将n转换为2进制，如果为1乘
        if (n % 2 == 1)
            ans *= PowersOfXO[i];
        i++;
        n /= 2;
    }
    printf(&quot;%d&quot;, ans);
}
</code></pre>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                  
                    <span class="date">2019/03/06</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90%E4%B9%A0%E9%A2%98.html'>数据结构与算法分析习题</a></span>
=======
>>>>>>> b3ad68a (2023-11-26 23:56:08)
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
              


			<div class="row">
			  <div class="large-6 columns">
			  <p class="text-left" style="padding-top:25px;">
			   <a href="all_2.html">&laquo; Prev Page</a>  
			  </p>
			  </div>
			  <div class="large-6 columns">
			<p class="text-right" style="padding-top:25px;">
			 <a href="all_4.html">&raquo; Next Page</a> 
			</p>
			  </div>
			</div>
		</div>
	</div><!-- large 8 -->

 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <h1>DreamEverAfter</h1>
                <div class="site-des"></div>
                <div class="social">











  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
        
            <a href="CS.html"><strong>CS</strong></a>
        
            <a href="List.html"><strong>List</strong></a>
        
            <a href="%E6%9D%82.html"><strong>杂</strong></a>
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="16996865532784.html">三汁焖锅</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="17001172774052.html">别了，中国大陆的Kindle</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="17001265068678.html">HomeBrew更新报错“fatal- Could not resolve HEAD to a revision”</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="17001892553950.html">SwiftUI基本控件</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="17001171363865.html">LiSSA第四代计时器说明书</a>
			      </li>
		     
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
</div>

        </section>
      </div>
    </div>



  














<style type="text/css">
figure{margin: 0;padding: 0;}
figcaption{text-align:center;}

/* PrismJS 1.14.0
 http://prismjs.com/download.html#themes=prism&languages=markup+css+clike+javascript */
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
    color: black;
    background: none;
    text-shadow: 0 1px white;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
    
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
    
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
    text-shadow: none;
    background:#b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
    text-shadow: none;
    background: #b3d4fc;
}

@media print {
    code[class*="language-"],
    pre[class*="language-"] {
        text-shadow: none;
    }
}

/* Code blocks */
pre[class*="language-"] {
    padding: 1em;
    margin: .5em 0;
    overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
    background: #F7F7F7;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
    padding: .1em;
    border-radius: .3em;
    white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
    color: slategray;
}

.token.punctuation {
    color: #999;
}

.namespace {
    opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
    color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
    color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
    color: #9a6e3a;
    background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
    color: #07a;
}

.token.function,
.token.class-name {
    color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
    color: #e90;
}

.token.important,
.token.bold {
    font-weight: bold;
}
.token.italic {
    font-style: italic;
}

.token.entity {
    cursor: help;
}


pre[class*="language-"].line-numbers {
    position: relative;
    padding-left: 3.8em;
    counter-reset: linenumber;
}

pre[class*="language-"].line-numbers > code {
    position: relative;
    white-space: inherit;
}

.line-numbers .line-numbers-rows {
    position: absolute;
    pointer-events: none;
    top: 0;
    font-size: 100%;
    left: -3.8em;
    width: 3em; /* works for line-numbers below 1000 lines */
    letter-spacing: -1px;
    border-right: 1px solid #999;

    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;

}

    .line-numbers-rows > span {
        pointer-events: none;
        display: block;
        counter-increment: linenumber;
    }

        .line-numbers-rows > span:before {
            content: counter(linenumber);
            color: #999;
            display: block;
            padding-right: 0.8em;
            text-align: right;
        }

</style>

  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>



  </body>
</html>
