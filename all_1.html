<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  DreamEverAfter
  
  </title>
  
  
  <link href="atom.xml" rel="alternate" title="DreamEverAfter" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
 
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site:www.dreameverafter.com ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="_self" href="index.html">Home</a></li>
        
        <li id=""><a target="_self" href="archives.html">Archives</a></li>
        
        <li id=""><a target="_self" href="tools.html">å·¥å…·</a></li>
        
        <li id=""><a target="_self" href="about.html">About</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="https://google.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; DreamEverAfter</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
        
        <li><a target="_self" href="index.html">Home</a></li>
        
        <li><a target="_self" href="archives.html">Archives</a></li>
        
        <li><a target="_self" href="tools.html">å·¥å…·</a></li>
        
        <li><a target="_self" href="about.html">About</a></li>
        

    <li><label>Categories</label></li>

        
            <li><a href="CS.html">CS</a></li>
        
            <li><a href="List.html">List</a></li>
        
            <li><a href="%E6%9D%82.html">æ‚</a></li>
         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
	$(function(){
		$('#menu_item_index').addClass('is_active');
	});
</script>
<div class="row">
	<div class="large-8 medium-8 columns">
		<div class="markdown-body home-categories">
		
			<div class="article">
                <a class="clearlink" href="17001155269640.html">
                
                  <h1>ç»ˆäºçœ‹å®Œäº†ã€Šæ‰å…‹Â·æ–½å¥ˆå¾·ç‰ˆæ­£ä¹‰è”ç›Ÿã€‹</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>å¼€å§‹æˆ‘æ˜¯æ²¡æƒ³åˆ°çœ‹ä¸€ä¸ªç”µå½±ä¼šè¿™ä¹ˆéš¾ã€‚</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                   <a href="17001155269640.html">Read more</a>&nbsp;&nbsp; 
                    <span class="date">2021/05/05</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Movies.html'>Movies</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="17001174083229.html">
                
                  <h1>è§‚ã€Šè§‚å±±æµ·ã€‹</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>ä¹…é—»ã€Šå±±æµ·ç»ã€‹å¤§åäº†ï¼Œå´ä¸€ç›´æ²¡æœ‰ç»†è‡´çš„çœ‹è¿‡ã€‚å¯èƒ½æ˜¯æ½œæ„è¯†è§‰å¾—çœ‹è¿™æœ¬ä¹¦éœ€è¦ç²¾å¿ƒæŒ‘é€‰ä¸€ä¸ªç‰ˆæœ¬ï¼Œç„¶åæ–‹æˆ’ä¸‰æ—¥æ²æµ´æ›´è¡£æ‰èƒ½å¼€å§‹çœ‹å§ã€‚è¿™æ ·çš„æƒ³æ³•åè€Œé€ æˆçš„æå¤§çš„è¡Œä¸ºæˆæœ¬ï¼Œç»“æœå°±æ˜¯ç›´åˆ°ä»Šå¤©æ‰æœ‰ä¸€ä¸ªçœ‹è¿™æœ¬ä¹¦çš„å¥‘æœºï¼Œæ²¡é”™ï¼Œè¿˜æ˜¯è¢«åŠ¨çš„ã€‚</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                   <a href="17001174083229.html">Read more</a>&nbsp;&nbsp; 
                    <span class="date">2021/05/03</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E6%9D%82.html'>æ‚</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="17001265070006.html">
                
                  <h1>æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ(ç¬¬äºŒç‰ˆ) å®¶åº­ä½œä¸š ç¬¬äºŒç« </h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>æ­£åœ¨çœ‹ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹è¿™æœ¬ä¹¦ï¼Œè¯¾åèŒ«èŒ«å¤šçš„ä¹ é¢˜ï¼Œçœ‹ç€å°±è®©äººå‘æ€µã€‚ã€‚</p>
<p>åšçš„æ—¶å€™ä¹Ÿéœ€è¦éªŒè¯ä¸€ä¸‹å¯¹é”™ï¼Œæ‰€ä»¥åœ¨ç½‘ä¸Šæ‰¾äº†å¾ˆå¤šç›¸å…³çš„é¢˜è§£ã€‚é¡ºä¾¿å°±åœ¨è¿™é‡Œè®°ä¸€ä¸‹äº†ã€‚</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                   <a href="17001265070006.html">Read more</a>&nbsp;&nbsp; 
                    <span class="date">2021/01/04</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='CSAPP.html'>CSAPP</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="17001892555760.html">
                
                  <h1>Swift Module å¦‚ä½•è¢«å…¨å±€å¼•ç”¨</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>ä»Šå¤©ä¸€ä¸ªiOSå¤§ä½¬é—®æˆ‘ä¸€ä¸ªå°é—®é¢˜ï¼Œä»–ç”¨ <code>cocoapods</code> é›†æˆäº†ä¸€ä¸ª <code>swift</code> çš„ <code>json</code> åº“ï¼š<code>SwiftyJSON</code>ï¼Œç”¨çš„æ—¶å€™å‘ç°æœ‰ä¸€ä¸ä¸ä¸æ–¹ä¾¿çš„åœ°æ–¹ï¼Œå°±æ˜¯åœ¨æ¯ä¸ªç”¨åˆ° <code>SwiftyJSON</code> çš„æ–‡ä»¶ä¸­ï¼Œéƒ½éœ€è¦ <code>import</code> ä¸€ä¸‹è¿™ä¸ª <code>module</code>ã€‚</p>
<<<<<<< HEAD
<p>å¹³æ—¶ä»–åœ¨ä¸»å·¥ç¨‹é‡Œå†™ä»£ç çš„æ—¶å€™ï¼Œç”±äºéƒ½åœ¨ä¸€ä¸ª <code>module</code> ä¹‹ä¸‹ï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šæ²¡æœ‰æ€ä¹ˆç”¨è¿‡ <code>import</code> äº†ï¼Œæ‰€ä»¥é—®æˆ‘ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Œä»¥åŠæœ‰æ²¡æœ‰ä¸€ä¸ªç±»ä¼¼äº <code>PCH</code> çš„æ–‡ä»¶ï¼ŒæŠŠ <code>SwiftyJSON</code> å…¨å±€å¼•ç”¨ã€‚</p>
<p>è‡³äºä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Œå…¶å®åˆšåˆšå·²ç»è¯´äº†ï¼Œå°±æ˜¯å› ä¸ºæ²¡æœ‰åœ¨ä¸€ä¸ª <code>module</code> ä¸­å˜›ã€‚æœ‰æ²¡æœ‰ç±»ä¼¼ <code>PCH</code> çš„ä¸œè¥¿å‘¢ï¼Œå…¶å®ä¹Ÿæ˜¯æœ‰çš„ã€‚</p>
<p>å¯ä»¥ç›´æ¥åˆ›å»ºä¸€ä¸ª <code>swift</code> æ–‡ä»¶ï¼ˆç±»ä¼¼ <code>PCH</code> ï¼‰ï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ä½¿ç”¨ <code>@_exported import</code> æ¥å¯¼å…¥ï¼š</p>
<pre><code class="language-swift">@_exported import SwiftyJSON 
</code></pre>
<p>è¿™å°±å¥½äº†ï¼Œæ²¡é”™ï¼Œæ™ºæ…§å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚</p>
=======
>>>>>>> b3ad68a (2023-11-26 23:56:08)

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
<<<<<<< HEAD
                  
=======
                   <a href="17001892555760.html">Read more</a>&nbsp;&nbsp; 
>>>>>>> b3ad68a (2023-11-26 23:56:08)
                    <span class="date">2020/11/20</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='Swift.html'>Swift</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="17001875302574.html">
                
                  <h1>LeetCode 398  éšæœºæ•°ç´¢å¼•</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>ç»™å®šä¸€ä¸ªå¯èƒ½å«æœ‰é‡å¤å…ƒç´ çš„æ•´æ•°æ•°ç»„ï¼Œè¦æ±‚éšæœºè¾“å‡ºç»™å®šçš„æ•°å­—çš„ç´¢å¼•ã€‚ æ‚¨å¯ä»¥å‡è®¾ç»™å®šçš„æ•°å­—ä¸€å®šå­˜åœ¨äºæ•°ç»„ä¸­ã€‚</p>
<p>æ³¨æ„ï¼š</p>
<p>æ•°ç»„å¤§å°å¯èƒ½éå¸¸å¤§ã€‚ ä½¿ç”¨å¤ªå¤šé¢å¤–ç©ºé—´çš„è§£å†³æ–¹æ¡ˆå°†ä¸ä¼šé€šè¿‡æµ‹è¯•ã€‚</p>
<<<<<<< HEAD
<p>ç¤ºä¾‹:</p>
<pre><code class="language-plain_text">int[] nums = new int[] {1,2,3,3,3};
Solution solution = new Solution(nums);

// pick(3) åº”è¯¥è¿”å›ç´¢å¼• 2,3 æˆ–è€… 4ã€‚æ¯ä¸ªç´¢å¼•çš„è¿”å›æ¦‚ç‡åº”è¯¥ç›¸ç­‰ã€‚
solution.pick(3);

// pick(1) åº”è¯¥è¿”å› 0ã€‚å› ä¸ºåªæœ‰nums[0]ç­‰äº1ã€‚
solution.pick(1);
</code></pre>
<p>è§£ï¼š</p>
<p>(è“„æ°´æ± æŠ½æ ·)</p>
<p>åˆ©ç”¨ä¸€ä¸ªunordered_map&lt;int, vector<int>&gt; umå­˜å‚¨æ¯ä¸ªæ•°å€¼å¯¹åº”çš„ä¸‹æ ‡ï¼Œé‚£ä¹ˆéšæœºè¿”å›ä¸€ä¸ªç´¢å¼•ï¼Œå…¶å®å°±æ˜¯ç”Ÿæˆä¸€ä¸ª0-um[target].size() - 1çš„ä¸€ä¸ªéšæœºæ•°ï¼Œè¿™æ ·å¦‚æœå­˜åœ¨å¤šæ¬¡pickï¼Œé‚£ä¹ˆæ¯æ¬¡éƒ½æ˜¯O(1)O(1)çš„æ•ˆç‡ã€‚</p>
<pre><code class="language-c++">class Solution {
public:

    unordered_map&lt;int, vector&lt;int&gt;&gt; um;
    
    Solution(vector&lt;int&gt;&amp; nums) {
        for (int i = 0; i &lt; nums.size(); i ++) {
            um[nums[i]].push_back(i);
        }
    }
    
    int pick(int target) {
        return um[target][rand() % um[target].size()];
    }
};

/**
 * Your Solution object will be instantiated and called as such:
 * Solution* obj = new Solution(nums);
 * int param_1 = obj-&gt;pick(target);
 */

</code></pre>
=======
>>>>>>> b3ad68a (2023-11-26 23:56:08)

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
<<<<<<< HEAD
                  
=======
                   <a href="17001875302574.html">Read more</a>&nbsp;&nbsp; 
>>>>>>> b3ad68a (2023-11-26 23:56:08)
                    <span class="date">2020/10/12</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='LeetCode.html'>LeetCode</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="17001150891969.html">
                
                  <h1>æ°´ä»™ ğŸŒ¼</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>ä¹°ä¸ªå®‰å“æ‰‹æœºåšå¯¼èˆªç”¨çš„ï¼Œæ²¡æˆæƒ³åˆ°æ‰‹ç¬¬ä¸€ä»¶äº‹å°±æ˜¯è£…äº†ä¸ªonsæ¨¡æ‹Ÿå™¨ï¼Œç„¶åä¸€æ™šä¸ŠæŠŠæ°´ä»™1å’Œ2ç©å®Œäº†ã€‚</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                   <a href="17001150891969.html">Read more</a>&nbsp;&nbsp; 
                    <span class="date">2020/09/22</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='List.html'>List</a></span>
          				  
          					    <span class="posted-in"><a href='Games.html'>Games</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="17001174848432.html">
                
                  <h1>ã€Šåä¸‡å¬‰çš®ã€‹</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<blockquote>
<p>ä¸‡èƒ½é’å¹´æ—…åº—</p>
</blockquote>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                   <a href="17001174848432.html">Read more</a>&nbsp;&nbsp; 
                    <span class="date">2020/09/14</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='%E6%9D%82.html'>æ‚</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="17001187952144.html">
                
                  <h1>Vue çš„ä¸€äº›æŒ‡ä»¤å’Œç¼©å†™</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<p>è¿™é‡Œå¾—å…ˆäº†è§£ä¸€ä¸‹vueä¸­çš„æŒ‡ä»¤(Directives)ã€‚</p>

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
                   <a href="17001187952144.html">Read more</a>&nbsp;&nbsp; 
                    <span class="date">2020/09/02</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='web.html'>web</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="17001875302498.html">
                
                  <h1>LeetCode 486 Predict the Winner(é¢„æµ‹èµ¢å®¶)</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2><a id="%E9%A2%98%E7%9B%AE" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>é¢˜ç›®</h2>
<p>ç»™å®šä¸€ä¸ªè¡¨ç¤ºåˆ†æ•°çš„éè´Ÿæ•´æ•°æ•°ç»„ã€‚ ç©å®¶ 1 ä»æ•°ç»„ä»»æ„ä¸€ç«¯æ‹¿å–ä¸€ä¸ªåˆ†æ•°ï¼Œéšåç©å®¶ 2 ç»§ç»­ä»å‰©ä½™æ•°ç»„ä»»æ„ä¸€ç«¯æ‹¿å–åˆ†æ•°ï¼Œç„¶åç©å®¶ 1 æ‹¿ï¼Œâ€¦â€¦ ã€‚æ¯æ¬¡ä¸€ä¸ªç©å®¶åªèƒ½æ‹¿å–ä¸€ä¸ªåˆ†æ•°ï¼Œåˆ†æ•°è¢«æ‹¿å–ä¹‹åä¸å†å¯å–ã€‚ç›´åˆ°æ²¡æœ‰å‰©ä½™åˆ†æ•°å¯å–æ—¶æ¸¸æˆç»“æŸã€‚æœ€ç»ˆè·å¾—åˆ†æ•°æ€»å’Œæœ€å¤šçš„ç©å®¶è·èƒœã€‚</p>
<<<<<<< HEAD
<p>ç»™å®šä¸€ä¸ªè¡¨ç¤ºåˆ†æ•°çš„æ•°ç»„ï¼Œé¢„æµ‹ç©å®¶1æ˜¯å¦ä¼šæˆä¸ºèµ¢å®¶ã€‚ä½ å¯ä»¥å‡è®¾æ¯ä¸ªç©å®¶çš„ç©æ³•éƒ½ä¼šä½¿ä»–çš„åˆ†æ•°æœ€å¤§åŒ–ã€‚</p>
<p>Given an array of scores that are non-negative integers. Player 1 picks one of the numbers from either end of the array followed by the player 2 and then player 1 and so on. Each time a player picks a number, that number will not be available for the next player. This continues until all the scores have been chosen. The player with the maximum score wins.</p>
<p>Given an array of scores, predict whether player 1 is the winner. You can assume each player plays to maximize his score.</p>
<p>ç¤ºä¾‹ 1ï¼š</p>
<pre><code class="language-plain_text">è¾“å…¥ï¼š[1, 5, 2]
è¾“å‡ºï¼šFalse
è§£é‡Šï¼šä¸€å¼€å§‹ï¼Œç©å®¶1å¯ä»¥ä»1å’Œ2ä¸­è¿›è¡Œé€‰æ‹©ã€‚
å¦‚æœä»–é€‰æ‹© 2ï¼ˆæˆ–è€… 1 ï¼‰ï¼Œé‚£ä¹ˆç©å®¶ 2 å¯ä»¥ä» 1ï¼ˆæˆ–è€… 2 ï¼‰å’Œ 5 ä¸­è¿›è¡Œé€‰æ‹©ã€‚å¦‚æœç©å®¶ 2 é€‰æ‹©äº† 5 ï¼Œé‚£ä¹ˆç©å®¶ 1 åˆ™åªå‰©ä¸‹ 1ï¼ˆæˆ–è€… 2 ï¼‰å¯é€‰ã€‚
æ‰€ä»¥ï¼Œç©å®¶ 1 çš„æœ€ç»ˆåˆ†æ•°ä¸º 1 + 2 = 3ï¼Œè€Œç©å®¶ 2 ä¸º 5 ã€‚
å› æ­¤ï¼Œç©å®¶ 1 æ°¸è¿œä¸ä¼šæˆä¸ºèµ¢å®¶ï¼Œè¿”å› False ã€‚
</code></pre>
<p>ç¤ºä¾‹ 2ï¼š</p>
<pre><code class="language-plain_text">è¾“å…¥ï¼š[1, 5, 233, 7]
è¾“å‡ºï¼šTrue
è§£é‡Šï¼šç©å®¶ 1 ä¸€å¼€å§‹é€‰æ‹© 1 ã€‚ç„¶åç©å®¶ 2 å¿…é¡»ä» 5 å’Œ 7 ä¸­è¿›è¡Œé€‰æ‹©ã€‚æ— è®ºç©å®¶ 2 é€‰æ‹©äº†å“ªä¸ªï¼Œç©å®¶ 1 éƒ½å¯ä»¥é€‰æ‹© 233 ã€‚
     æœ€ç»ˆï¼Œç©å®¶ 1ï¼ˆ234 åˆ†ï¼‰æ¯”ç©å®¶ 2ï¼ˆ12 åˆ†ï¼‰è·å¾—æ›´å¤šçš„åˆ†æ•°ï¼Œæ‰€ä»¥è¿”å› Trueï¼Œè¡¨ç¤ºç©å®¶ 1 å¯ä»¥æˆä¸ºèµ¢å®¶ã€‚
</code></pre>
<p>æç¤ºï¼š</p>
<ul>
<li>1 &lt;= ç»™å®šçš„æ•°ç»„é•¿åº¦ &lt;= 20.</li>
<li>æ•°ç»„é‡Œæ‰€æœ‰åˆ†æ•°éƒ½ä¸ºéè´Ÿæ•°ä¸”ä¸ä¼šå¤§äº 10000000 ã€‚</li>
<li>å¦‚æœæœ€ç»ˆä¸¤ä¸ªç©å®¶çš„åˆ†æ•°ç›¸ç­‰ï¼Œé‚£ä¹ˆç©å®¶ 1 ä»ä¸ºèµ¢å®¶ã€‚</li>
</ul>
<h2><a id="%E8%A7%A3%E9%A2%98" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>è§£é¢˜</h2>
<p>è®¾ï¼šæ€»åˆ† = å…ˆæ‰‹å¾—åˆ† - åæ‰‹å¾—åˆ†ã€‚</p>
<p>å½“æ‰€æœ‰åˆ†æ•°éƒ½è¢«æ‹¿èµ°åï¼Œå¦‚æœæ€»åˆ†&gt;=0ï¼Œå°±æ˜¯å…ˆæ‰‹èƒœï¼Œåä¹‹å°±æ˜¯åæ‰‹èƒœåˆ©ã€‚</p>
<p>ç”±äºæ˜¯ä¸¤ä¸ªäººåˆ†åˆ«æ‹¿ï¼Œæ‰€ä»¥éœ€è¦ <code>turn</code> çš„æ­£è´Ÿæ¥è¡¨ç¤ºå…ˆæ‰‹è¿˜æ˜¯åæ‰‹ï¼Œåœ¨æ‰€æœ‰è®¡ç®—åˆ†æ•°çš„åœ°æ–¹éƒ½ä¹˜ä»¥ <code>turn</code>ï¼Œä½¿å¾—æ€»åˆ†å°±æ˜¯å·®å€¼ã€‚</p>
<p>æœ€ç›´è§‚çš„æ€è·¯å°±æ˜¯ç”¨é€’å½’åšå‡ºæ¥ï¼Œè®¾æ•°ç»„ä¸¤å¤´çš„ä¸‹æ ‡ä¸º <code>start</code> å’Œ <code>end</code>ã€‚</p>
<p>é€’å½’å‡½æ•°ä¸­åˆ†åˆ«é€‰æ‹©ä¸€ä¸ªä¸‹æ ‡ï¼Œè®¡ç®—é€‰æ‹©ä¸‹æ ‡ä¹‹åé€’å½’è®¡ç®—å‡ºæ•°ç»„å‰©ä¸‹çš„åˆ†è¢«é€‰æ‹©åçš„æ€»åˆ†ã€‚</p>
<p>ä¸‹æ ‡çš„åˆ†åŠ ä¸Šå‰©ä¸‹çš„æ€»åˆ†å…±æœ‰ä¸¤ç§æƒ…å†µï¼Œå–æœ€å¤§å€¼ï¼Œå°±æ˜¯å½“å‰é€’å½’å‡½æ•°çš„æ€»åˆ†ã€‚</p>
<p>é€’å½’ä¸­æ­¢æ¡ä»¶ä¸º <code>start == end</code>ï¼Œ è¿™æ—¶å€™ç›´æ¥è¿”å›å½“å‰ä¸‹æ ‡çš„å€¼å°±å¥½äº†ã€‚</p>
<h2><a id="%E9%80%92%E5%BD%92%E8%A7%A3%E6%B3%95" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>é€’å½’è§£æ³•</h2>
<p>è§£ï¼š</p>
<pre><code class="language-cpp">
class Solution {
public:
    bool PredictTheWinner(vector&lt;int&gt;&amp; nums) {
        return total(nums, 0, nums.size() - 1, 1) &gt;= 0;
    }

    int total(vector&lt;int&gt;&amp; nums, int start, int end, int turn) {
        if (start == end) {
            return nums[start] * turn;
        }
        int scoreStart = nums[start] * turn + total(nums, start + 1, end, -turn);
        int scoreEnd = nums[end] * turn + total(nums, start, end - 1, -turn);
        return max(scoreStart * turn, scoreEnd * turn) * turn;
    }
};

</code></pre>
<p>æ—¶é—´å¤æ‚åº¦ï¼š<code>O(2^n)</code>ï¼Œå…¶ä¸­ <code>n</code> æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼šO(n)ï¼Œå…¶ä¸­ <code>n</code> æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚ç©ºé—´å¤æ‚åº¦å–å†³äºé€’å½’ä½¿ç”¨çš„æ ˆç©ºé—´ã€‚</p>
<h2><a id="%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E8%A7%A3%E6%B3%95" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>åŠ¨æ€è§„åˆ’è§£æ³•</h2>
<p>ä½¿ç”¨é€’å½’ï¼Œå­˜åœ¨å¤§é‡é‡å¤è®¡ç®—ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦å¾ˆé«˜ã€‚å¯ä»¥è¯•ç”¨åŠ¨å½’è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œè®°å½•è®¡ç®—è¿‡çš„æ€»åˆ†ã€‚</p>
<p><code>dp[i][j]</code> ä¸ºå½“å‰ç©å®¶åœ¨æ•°ç»„ä¸­ï¼Œä¸‹æ ‡ <code>i</code> åˆ°ä¸‹æ ‡ <code>j</code> çš„åˆ†æ•°ä¹‹å·®çš„æœ€å¤§å€¼ï¼Œå½“å‰ç©å®¶ä¸ä¸€å®šæ˜¯å…ˆæ‰‹ç©å®¶ã€‚</p>
<p>æ ¹æ®é¢˜æ„ï¼Œiä¸å¯èƒ½å¤§äºjã€‚</p>
<p>å½“i==jæ—¶ï¼Œdp[i][j] = nums[i];</p>
<p>è®¡ç®—åˆ†æ•°çš„ä¹‹å·®çš„æœ€å¤§å€¼ï¼ˆçŠ¶æ€è½¬ç§»ï¼‰çš„å…¬å¼æ˜¯ï¼š</p>
<pre><code class="language-cpp">dp[i][j] = max(nums[i] - dp[i + 1][j], nums[j] - dp[i][j - 1]);
</code></pre>
<p>æ³¨æ„çŠ¶æ€è½¬ç§»çš„æ–¹å‘ï¼Œä¿è¯ä¾èµ–çš„å€¼å·²ç»æœ‰è§£ã€‚</p>
<pre><code class="language-cpp">class Solution {
public:
    bool PredictTheWinner(vector&lt;int&gt;&amp; nums) {
        int length = nums.size();
        auto dp = vector&lt;vector&lt;int&gt;&gt; (length, vector&lt;int&gt;(length));
        for (int i = 0; i &lt; length; i++) {
            dp[i][i] = nums[i];
        }
        // - 2æ˜¯å› ä¸ºi == length - 1ï¼Œè¿™ä¸ªå€¼åœ¨åˆšåˆšå·²ç»ç®—è¿‡äº†ï¼Œåªæœ‰ä¸€ä¸ªå€¼ï¼Œå³dp[i][i]
        for (int i = length - 2; i &gt;= 0; i--) {
            for (int j = i + 1; j &lt; length; j++) {
                dp[i][j] = max(nums[i] - dp[i + 1][j], nums[j] - dp[i][j - 1]);
            }
        }
        return dp[0][length - 1] &gt;= 0;
    }
};
</code></pre>
<p>ç»è¿‡è§‚å¯Ÿï¼Œ<code>dp[i][j]</code> çš„å€¼åªå’Œ <code>dp[i+1][j]</code> ä¸ <code>dp[i][jâˆ’1]</code> æœ‰å…³ã€‚</p>
<p>å³åœ¨è®¡ç®—ç¬¬ <code>i</code> è¡Œçš„å€¼æ—¶ï¼Œåªä½¿ç”¨åˆ° <code>dp</code> çš„ç¬¬ <code>i</code> è¡Œå’Œç¬¬ <code>i+1</code> è¡Œçš„å€¼ï¼Œè€Œ <code>j=i+1</code> ï¼Œæ‰€ä»¥å¤§äº <code>i+1</code> åé¢çš„è¡Œï¼Œéƒ½ç”¨ä¸åˆ°äº†ï¼Œå¯ä»¥å€Ÿç»™ <code>j</code> ç”¨ã€‚</p>
<p>åˆ—ä¹Ÿåªåœ¨æ„ <code>j</code> å’Œ <code>j - 1</code> çš„å€¼ï¼Œæ‰€ä»¥å°±å¯ä»¥ç”¨ä¸€ä¸ªæ•°ç»„æ¥è®°å½•ã€‚</p>
<p>å¯ä»¥ä¼˜åŒ–ä¸€ä¸‹ç©ºé—´ï¼ŒæŠŠäºŒç»´æ•°ç»„æ¢æˆä¸€ç»´æ•°ç»„ã€‚</p>
<pre><code class="language-cpp">class Solution {
public:
    bool PredictTheWinner(vector&lt;int&gt;&amp; nums) {
        int length = nums.size();
        auto dp = vector&lt;int&gt;(length);
        for (int i = 0; i &lt; length; i++) {
            dp[i] = nums[i];
        }
        for (int i = length - 2; i &gt;= 0; i--) {
            for (int j = i + 1; j &lt; length; j++) {
                dp[j] = max(nums[i] - dp[j], nums[j] - dp[j - 1]);
            }
        }
        return dp[length - 1] &gt;= 0;
    }
};
</code></pre>
<p>æ—¶é—´å¤æ‚åº¦ï¼š<code>O(n^2)</code>ï¼Œå…¶ä¸­ <code>n</code> æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚éœ€è¦è®¡ç®—æ¯ä¸ªå­æ•°ç»„å¯¹åº”çš„ <code>dp</code> çš„å€¼ï¼Œå…±æœ‰ <code>n(n+1)/2</code> ä¸ªå­æ•°ç»„ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦ï¼š<code>O(n)</code>ï¼Œå…¶ä¸­ <code>n</code> æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚ç©ºé—´å¤æ‚åº¦å–å†³äºé¢å¤–åˆ›å»ºçš„æ•°ç»„ <code>dp</code>ï¼Œå¦‚æœä¸ä¼˜åŒ–ç©ºé—´ï¼Œåˆ™ç©ºé—´å¤æ‚åº¦æ˜¯ <code>O(n^2)</code>ï¼Œä½¿ç”¨ä¸€ç»´æ•°ç»„ä¼˜åŒ–ä¹‹åç©ºé—´å¤æ‚åº¦å¯ä»¥é™è‡³ <code>O(n)</code>ã€‚</p>
=======
>>>>>>> b3ad68a (2023-11-26 23:56:08)

                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
<<<<<<< HEAD
                  
=======
                   <a href="17001875302498.html">Read more</a>&nbsp;&nbsp; 
>>>>>>> b3ad68a (2023-11-26 23:56:08)
                    <span class="date">2020/09/01</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='LeetCode.html'>LeetCode</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
			<div class="article">
                <a class="clearlink" href="17001892556510.html">
                
                  <h1>æµ…è°ˆiOSä¸­çš„weak</h1>
                  <div class="a-content">
                      
                      <div class="a-content-text">
                        
                        	<h2><a id="weak%E6%8E%A2%E7%A9%B6" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>__weakæ¢ç©¶</h2>
<p>ç¨‹åºä¸­æ·»åŠ äº†ä¸€ä¸ª <code>__weak</code> å˜é‡ï¼ŒæŸ¥çœ‹è°ƒç”¨å †æ ˆï¼Œçœ‹åˆ°ä¸‹ä¸€ä¸ªè°ƒç”¨çš„æ˜¯ <code>objc_initWeak</code> å‡½æ•°ã€‚</p>
<<<<<<< HEAD
<p><img src="https://gitee.com/anyanf/images/raw/master/img/weak%E5%85%A5%E5%8F%A3.jpg" alt="__weakè°ƒç”¨çš„å‡½æ•°" /></p>
<p>æ‰€ä»¥æˆ‘ä»¬å°± <code>objc_initWeak</code> å‡½æ•°ä½œä¸ºå…¥å£ï¼Œæ¢ç©¶ <code>weak</code>ã€‚</p>
<h2><a id="%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>æ•°æ®ç»“æ„</h2>
<p>é¦–å…ˆäº†è§£ä»¥ä¸‹çš„å˜é‡ï¼Œè¿™äº›å˜é‡åœ¨è¿™ç« çš„æ•°æ®ç»“æ„ã€å‡½æ•°å½¢å‚ä¸­ä½¿ç”¨ï¼š</p>
<pre><code class="language-swift">__weak id weakPtr = o
location            newObj
refferer            reffenent
å¼•ç”¨è€…               è¢«å¼•ç”¨è€…
</code></pre>
<h3><a id="stripedmap" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>StripedMap</h3>
<p>ä¸‹é¢ä» <code>SideTables()</code> å‡½æ•°ä¸ºå…¥å£ï¼Œäº†è§£ <code>weak</code> ç›¸å…³çš„æ•°æ®ç»“æ„ã€‚</p>
<pre><code class="language-CPP">static StripedMap&lt;SideTable&gt;&amp; SideTables() {
    return *reinterpret_cast&lt;StripedMap&lt;SideTable&gt;*&gt;(SideTableBuf);
}
</code></pre>
<p>è¿™ä¸ªå‡½æ•°è¿”å› <code>StripedMap</code> ç»“æ„ï¼Œ<code>StripedMap</code> æ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œå‡½æ•°ä½“å†…å°†SideTableBufå¼ºåˆ¶è½¬æ¢ä¸º <code>StripedMap&lt;SideTable&gt;</code></p>
<p><code>StripedMap</code> å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="language-CPP">template&lt;typename T&gt;
class StripedMap {
    struct PaddedT {
        T value alignas(64);
    };

    PaddedT array[64];
};
</code></pre>
<p>ä¸Šé¢ä»£ç æ˜¯ <code>StripedMap</code> çš„ç®€åŒ–å®šä¹‰ï¼Œ<code>StripedMap</code> æ˜¯ä¸ªæ¨¡æ¿ç±»ï¼Œæ ¹æ®æ¨¡æ¿å‚æ•° <code>T</code> ç”Ÿæˆå®ä¾‹ç±»ï¼Œæˆ‘ä»¬ç»™æ¨¡æ¿å‚æ•°ä¼ é€’çš„å®å‚æ˜¯ <code>SideTable</code>ï¼Œ<code>StripedMap</code> å†…éƒ¨åªå®šä¹‰äº†ä¸€ä¸ªæ•°æ®æˆå‘˜ <code>PaddedT array[64]</code>ï¼Œ<code>PaddedT</code> å°±æ˜¯ <code>64</code> ä½å¯¹é½åçš„ <code>SideTable</code>ã€‚</p>
<p>è¿›ä¸€æ­¥ç®€åŒ–ï¼š</p>
<pre><code class="language-cpp">SideTable array[64];
</code></pre>
<p>æ‰€ä»¥ <code>StripedMap</code> å°±æ˜¯ <code>SideTable</code> å‹çš„æ•°ç»„ï¼Œæ•°ç»„æœ‰ <code>64</code> ä¸ªæˆå‘˜ã€‚</p>
<p><code>SideTable</code> çš„ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="language-cpp">struct SideTable {
    spinlock_t slock;
    RefcountMap refcnts;
    weak_table_t weak_table;
}
</code></pre>
<p><img src="https://gitee.com/anyanf/images/raw/master/img/weak_sideTable.png" alt="weak_sideTable" /></p>
<p>å¯ä»¥çœ‹å‡ºSideTableçš„å¤§å°æ˜¯62ï¼Œ64ä½å¯¹é½åæ˜¯64ã€‚å…¶ä¸­weak_talbeå­˜å‚¨ç€weakç›¸å…³çš„å†…å®¹ã€‚å…¶ä»–çš„ä¸¤ä¸ªæˆå‘˜refcntsã€slockä¸åœ¨æœ¬æ–‡çš„ç ”ç©¶èŒƒå›´å†…ã€‚</p>
<p>æ‰€ä»¥æ•°ç»„ <code>SideTable array[64]</code> ä¸­å…ƒç´ çš„å¤§å°å°±æ˜¯ <code>64</code>ã€‚æ•´ä¸ª <code>array</code> å…±å ç”¨ <code>64*64=4096</code> å­—èŠ‚ã€‚å›åˆ°æ²¡æœ‰ç®€åŒ–å‰çš„ç‰ˆæœ¬ï¼Œ<code>StripedMap&lt;SideTable&gt;</code> æœ¬è´¨æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„å…ƒç´ æ˜¯æ¨¡æ¿å‚æ•°ç±»å‹ â€” <code>SideTable</code>ï¼Œå¤§å°ä¸º <code>64</code>ã€‚</p>
<p><img src="https://gitee.com/anyanf/images/raw/master/img/stripmap_memory_struct.png" alt="StripedMap å†…å­˜ç»“æ„" /></p>
<p>å‡½æ•° <code>SideTables()</code> æ˜¯å°† <code>SideTableBuf</code> è½¬åŒ–ä¸º <code>StripedMap&lt;SideTable&gt;</code> çš„ã€‚æ‰€ä»¥ä¸‹é¢äº†è§£ <code>SideTableBuf</code> çš„å®šä¹‰ã€‚</p>
<h3><a id="sidetablebuf" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>SideTableBuf</h3>
<p>SideTableBufçš„å®šä¹‰ï¼š</p>
<pre><code class="language-cpp">alignas(StripedMap&lt;SideTable&gt;) static uint8_t
    SideTableBuf[sizeof(StripedMap&lt;SideTable&gt;)];
</code></pre>
<p>å‰é¢çš„ <code>alignas(StripedMap)</code> æ˜¯å¯¹é½çš„ã€‚<code>sizeof(StripedMap&lt;SideTable&gt;)</code> æ ¹æ®ä¸Šé¢åˆ†ææ˜¯ <code>4096</code>ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç ç®€åŒ–ä¸ºï¼š</p>
<pre><code class="language-cpp">static uint8_t SideTableBuf[4096];
</code></pre>
<p>æ‰€ä»¥ <code>SideTableBuf</code> å°±æ˜¯ä¸€ä¸ªåŒ…å« <code>4096</code> ä¸ª <code>uint8_t</code> çš„æ•°ç»„ ã€‚</p>
<p>æ‰€ä»¥ï¼Œå‡½æ•° <code>SideTables()</code> å°±ç›¸å½“å°† <code>uint8_t SideTableBuf[4096]</code> é‡æ–°è§£é‡Šä¸º <code>SideTable array[64]</code>ã€‚</p>
<pre><code class="language-cpp">static StripedMap&lt;SideTable&gt;&amp; SideTables() {
    return *reinterpret_cast&lt;StripedMap&lt;SideTable&gt;*&gt;(SideTableBuf);
}
</code></pre>
<p><img src="https://gitee.com/anyanf/images/raw/master/img/stripedMap.png" alt="SideTableBufè½¬åŒ–ä¸ºStripedMap å†…å­˜ç¤ºæ„å›¾" /></p>
<h3><a id="weak-table-t" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>weak_table_t</h3>
<pre><code class="language-cpp">// å…¨å±€çš„å¼±å¼•ç”¨è¡¨
struct weak_table_t {
    weak_entry_t *weak_entries; 
    size_t    num_entries; // å®ä½“çš„æ•°é‡
    uintptr_t mask;
    uintptr_t max_hash_displacement;
};
</code></pre>
<ol>
<li><code>weak_entries</code> ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„æ¯ä¸ªå…ƒç´ æ˜¯ <code>weak_entry_t</code> ç»“æ„ä½“ï¼Œä¸€ä¸ª <code>weak_entry_t</code> ç»“æ„å­˜å‚¨äº†ä¸€ä¸ª <code>reffenent</code>ï¼Œä»¥åŠæŒ‡å‘ <code>reffenent</code> çš„å¼±å¼•ç”¨è€…ä»¬ã€‚</li>
<li><code>num_entries</code> æ˜¯å®ä½“ <code>weak_entry_t</code> çš„æ•°é‡</li>
<li><code>mask</code> æ˜¯å®¹é‡å‡ <code>1</code>.</li>
</ol>
<h3><a id="weak-entry-t" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>weak_entry_t</h3>
<pre><code class="language-cpp">struct weak_entry_t {
    DisguisedPtr&lt;objc_object&gt; referent; 
    union {
        struct {
            weak_referrer_t *referrers; 
            uintptr_t        out_of_line : 1; // å˜é‡åæ˜¯ out_of_line ï¼Œå  1 ä¸ª bit
            uintptr_t        num_refs : PTR_MINUS_1; // æ•°ç»„ä¸­æœ‰å‡ ä¸ªå…ƒç´ ï¼Œå³ referent æœ‰å‡ ä¸ªå¼±å¼•ç”¨
            uintptr_t        mask;
            uintptr_t        max_hash_displacement;
        };
        struct {
            // out_of_line=0 is LSB of one of these (don't care which)
            weak_referrer_t  inline_referrers[WEAK_INLINE_COUNT];
        };
    };
};
</code></pre>
<p>è¿™ä¸ªç»“æ„çœ‹ç€æ¯”è¾ƒå¤æ‚ï¼š</p>
<ol>
<li><code>referent</code> å­˜å‚¨è¢«å¼±å¼•ç”¨çš„å¯¹è±¡ã€‚</li>
<li>ç¬¬äºŒä¸ªæˆå‘˜æ˜¯ä¸€ä¸ª <code>union</code>ï¼Œå­˜å‚¨å¼±å¼•ç”¨è€… <code>refferer</code>ã€‚å¦‚æœ <code>referent</code> çš„å¼±å¼•ç”¨è€…å°äºå››ä¸ªï¼Œä¹Ÿå°±æ˜¯ <code>out_of_line</code> ä¸º <code>0</code> æ—¶ï¼Œå¼±å¼•ç”¨è€…å°±å­˜å‚¨åœ¨ <code>inline_referrers</code> æ•°ç»„ä¸­ã€‚ å¦åˆ™ï¼Œå°±å­˜å‚¨åœ¨ <code>referrers</code> ä¸­ï¼Œè¿™æ—¶ <code>out_of_line</code> ä¸º <code>1</code>ï¼Œ<code>referrers</code> æ˜¯ä¸ªäºŒçº§æŒ‡é’ˆï¼Œé‡Œé¢å­˜çš„æ˜¯æŒ‡å‘ <code>referent</code> çš„å¯¹è±¡ä»¬çš„åœ°å€ã€‚<code>num_refs</code> æ˜¯å¼±å¼•ç”¨ç€çš„ä¸ªæ•°ã€‚<code>mask</code> æ˜¯å®¹é‡å‡ <code>1</code>ã€‚</li>
</ol>
<p><img src="https://gitee.com/anyanf/images/raw/master/img/weak_entry_t.png" alt="SideTableBufè½¬åŒ–ä¸ºStripedMap" /></p>
<h3><a id="%E5%B0%8F%E7%BB%93" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>å°ç»“</h3>
<p>ä¸Šé¢åˆ†æäº†weakç›¸å…³çš„ç»“æ„ï¼Œç°åœ¨ç”»ä¸€å¼ æ€»å›¾ï¼š</p>
<p><img src="https://gitee.com/anyanf/images/raw/master/img/weak_data_overal.png" alt="SideTableBufè½¬åŒ–ä¸ºStripedMap" /></p>
<p>ä¸Šé¢æ˜¯è¯¦ç»†çš„æ•°æ®ç»“æ„ï¼Œæ¯”è¾ƒå¤æ‚ï¼Œä¸‹é¢åˆ—å‡ºæˆ‘è®¤ä¸ºæ ¸å¿ƒçš„ç»“æ„ï¼Œæ ¸å¿ƒç»“æ„å°±æ˜¯ä¸‰çº§hashè¡¨ã€‚</p>
<p><img src="https://gitee.com/anyanf/images/raw/master/img/weak_table%E4%B8%89%E7%BA%A7%E8%A1%A8.png" alt="SideTableBufè½¬åŒ–ä¸ºStripedMap" /></p>
<h2><a id="%E5%87%BD%E6%95%B0%E6%8E%A5%E5%8F%A3" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>å‡½æ•°æ¥å£</h2>
<pre><code class="language-cpp">id objc_storeWeakOrNil(id *location, id newObj);
id objc_initWeak(id *location, id newObj);
void objc_destroyWeak(id *location);
</code></pre>
<p>ä¸‹é¢ç« èŠ‚çš„ä»£ç åªæ˜¯ç®€åŒ–çš„ä»£ç ï¼Œä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œå¯èƒ½ç¼ºå¤±éƒ¨åˆ†ç»†èŠ‚ã€‚</p>
<h3><a id="objc-initweak" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>objc_initWeak</h3>
<pre><code class="language-cpp">id
objc_initWeak(id *location, id newObj)
{
    if (!newObj) {
        *location = nil;
        return nil;
    }

    return storeWeak&lt;DontHaveOld, DoHaveNew, DoCrashIfDeallocating&gt;
        (location, (objc_object*)newObj);
}
</code></pre>
<p><code>objc_initWeak</code> å†…éƒ¨åªè°ƒç”¨äº† <code>storeWeak</code> å‡½æ•°ã€‚</p>
<h3><a id="objc-storeweak" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>objc_storeWeak</h3>
<pre><code class="language-cpp">id
objc_storeWeak(id *location, id newObj)
{

    return storeWeak&lt;true/*old*/,
                    true/*new*/,
                    true/*crash*/&gt;
        (location, (objc_object *)newObj);
}
</code></pre>
<h3><a id="objc-destroyweak" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>objc_destroyWeak</h3>
<pre><code class="language-cpp">objc_destroyWeak(id *location)
{
    (void)storeWeak&lt;true/*old*/, false/*new*/, false/*crash*/&gt;
        (location, nil);
}
</code></pre>
<p>å¯ä»¥çœ‹å‡º <code>objc_initWeak</code>ã€ <code>objc_storeWeak</code>ã€ <code>objc_destroyWeak</code> çš„å…³é”®å†…å®¹éƒ½æ˜¯è°ƒç”¨ <code>storeWeak</code> å‡½æ•°ï¼Œåªæ˜¯æ¨¡æ¿å‚æ•°ä¼ é€’çš„ä¸ä¸€æ ·ã€‚</p>
<h3><a id="storeweak" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>storeWeak</h3>
<p>ä¸‹é¢è®²è§£storeWeakå‡½æ•°ï¼Œä¸‹é¢åªå…³æ³¨æ·»åŠ çš„è¿‡ç¨‹ã€‚åˆ é™¤çš„è¿‡ç¨‹æ²¡æœ‰å…³æ³¨ã€‚</p>
<pre><code class="language-cpp">template &lt;HaveOld haveOld, HaveNew haveNew,
          CrashIfDeallocating crashIfDeallocating&gt;
static id 
storeWeak(id *location, objc_object *newObj)
{
    assert(haveOld  ||  haveNew);
    if (!haveNew) assert(newObj == nil);

    Class previouslyInitializedClass = nil;
    id oldObj;
    SideTable *oldTable;
    SideTable *newTable;

    if (haveNew) {
        newTable = &amp;SideTables()[newObj];
    } else {
        newTable = nil;
    }


    // Assign new value, if any.
    if (haveNew) {
        newObj = (objc_object *)
            weak_register_no_lock(&amp;newTable-&gt;weak_table, (id)newObj, location, 
                                  crashIfDeallocating);
    }
    return (id)newObj;
}
</code></pre>
<pre><code class="language-cpp">if (haveNew) {
        newTable = &amp;SideTables()[newObj];
    } else {
        newTable = nil;
    }
</code></pre>
<p>å°±æ˜¯æ ¹æ® <code>newObj</code> æ‰¾åˆ°å­˜å‚¨ <code>newObj</code> çš„åœ°å€å¯¹åº”çš„ <code>SideTable</code>ã€‚</p>
<pre><code class="language-cpp">static unsigned int indexForPointer(const void *p) {
       uintptr_t addr = reinterpret_cast&lt;uintptr_t&gt;(p);
       return ((addr &gt;&gt; 4) ^ (addr &gt;&gt; 9)) % StripeCount;
}

public:
   T&amp; operator[] (const void *p) { 
       return array[indexForPointer(p)].value; 
}
</code></pre>
<p><code>StripedMap</code> é‡è½½äº† <code>[]</code> æ“ä½œç¬¦ï¼Œå†…éƒ¨è°ƒç”¨äº† <code>indexForPointer</code>ï¼Œ<code>indexForPointer</code> å°±æ˜¯å°†å¯¹è±¡çš„åœ°å€åšæŸäº›æ“ä½œï¼Œç›¸å½“äº <code>hash</code>ã€‚ç„¶åå°† <code>hash</code> çš„ç»“æœå’Œ <code>64</code> å–ä½™ï¼Œå¾—åˆ° <code>0~63</code> çš„å€¼ï¼Œè¿™ä¸ªå€¼å°±å¯ä»¥å½“åšæ•°ç»„çš„ç´¢å¼•ä½¿ç”¨ã€‚</p>
<p><code>storeWeak</code> å‡½æ•°æ¥ç€è°ƒç”¨äº† <code>weak_register_no_lock</code> å‡½æ•°ï¼š</p>
<pre><code class="language-cpp">id 
weak_register_no_lock(weak_table_t *weak_table, id referent_id, 
                      id *referrer_id, bool crashIfDeallocating)
{
    objc_object *referent = (objc_object *)referent_id;
    objc_object **referrer = (objc_object **)referrer_id;  

    // now remember it and where it is being stored
    weak_entry_t *entry;
    // æ‰¾åˆ° referent æ‰€åœ¨çš„ entry
    if ((entry = weak_entry_for_referent(weak_table, referent))) {
        // å°† referrer æ·»åŠ è¿›è¿™ä¸ª entry ä¸­ï¼Œè¿™æ · referrer å°±æˆä¸º referent çš„å¼±å¼•ç”¨ä¹‹ä¸€äº†
        append_referrer(entry, referrer);
    }
    // å¦‚æœæ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„ entry ï¼Œé‚£ä¹ˆè¯´æ˜ referent è¿˜æ²¡æœ‰å¼±å¼•ç”¨ï¼Œå°±ä¸ºå…¶æ–°å»ºä¸€ä¸ª entry
    else {
        weak_entry_t new_entry;
        new_entry.referent = referent;
        new_entry.out_of_line = 0;
        new_entry.inline_referrers[0] = referrer;
        // æ•°ç»„ä¸­ 4 ä¸ªreferrerå…¨éƒ¨åˆå§‹åŒ–ä¸º nil
        for (size_t i = 1; i &lt; WEAK_INLINE_COUNT; i++) {
            new_entry.inline_referrers[i] = nil;
        }
        // æ£€æŸ¥ä¸€ä¸‹éœ€ä¸éœ€è¦æ‰©å®¹
        weak_grow_maybe(weak_table);
        // å°†æ–°å»ºçš„ entry æ’å…¥ weak table ä¸­
        weak_entry_insert(weak_table, &amp;new_entry);
    }
    return referent_id;
}
</code></pre>
<p>è¿™ä¸ªå‡½æ•°çš„åŠŸèƒ½å°±æ˜¯è®² <code>referrer_id</code> æ’å…¥åˆ°æ­£ç¡®çš„ä½ç½®ï¼Œåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š</p>
<ol>
<li>å¦‚æœæ ¹æ® <code>referent_id</code> å¯ä»¥æ‰¾åˆ°ä¸€ä¸ª <code>weak_entry_t</code> ç±»å‹çš„å®ä½“ <code>entry</code>ï¼Œå°±è°ƒç”¨å°† <code>append_referrer</code> å°† <code>referrer_id</code> æ’å…¥åˆ° <code>entry</code>ï¼ˆç›¸å½“äºä¸‰çº§hashè¡¨ï¼‰ä¸­ã€‚</li>
<li>å¦‚æœæ²¡æœ‰ï¼Œå°±éœ€è¦æ–°å»ºä¸€ä¸ª <code>weak_entry_t</code> ç±»å‹çš„å®ä½“ <code>new_entry</code>ã€‚ç„¶åè°ƒç”¨ <code>weak_entry_insert</code> å°† <code>new_entry</code> æ’å…¥åˆ°äºŒçº§hashè¡¨ä¸­ã€‚</li>
</ol>
<pre><code class="language-cpp">static weak_entry_t *
weak_entry_for_referent(weak_table_t *weak_table, objc_object *referent)
{
    // ä¸èƒ½æ˜¯ nil
    assert(referent);

    // weak_table ä¸­å­˜çš„å®ä½“æ•°ç»„
    weak_entry_t *weak_entries = weak_table-&gt;weak_entries;

    if (!weak_entries) {
        return nil;
    }

    // é€šè¿‡ Hash çš„æ–¹æ³•æ‰¾åˆ° referent æ‰€åœ¨çš„ç´¢å¼•ï¼Œä¸è¿‡å®åœ¨çœ‹ä¸æ‡‚
    size_t index = hash_pointer(referent) &amp; weak_table-&gt;mask;
    size_t hash_displacement = 0;
    while (weak_table-&gt;weak_entries[index].referent != referent) {
        index = (index+1) &amp; weak_table-&gt;mask;
        hash_displacement++;
        if (hash_displacement &gt; weak_table-&gt;max_hash_displacement) {
            return nil;
        }
    }
    
    // è¿”å›æ‰¾åˆ°çš„ weak_entry_tï¼Œè¿™é‡Œå¯ä»¥è¯æ˜ weak_entries ç¡®å®æ˜¯ä¸€ä¸ªæ•°ç»„
    return &amp;weak_table-&gt;weak_entries[index];
}
</code></pre>
<p><code>weak_entry_for_referent</code> æ ¹æ®ç»™çš„çš„ <code>referent</code> åœ¨ <code>weak_table-&gt;weak_entries</code> ä¸­éå†ï¼Œæ˜¯å¦æœ‰ç›¸åŒçš„ï¼Œå¦‚æœç›¸åŒå°±è¿”å›å¯¹åº”çš„ <code>weak_entry_t</code> ç±»å‹çš„å®ä½“ï¼Œå¦‚æœæ²¡æœ‰ <code>nil</code>ã€‚</p>
<p><code>hash_pointer</code> å°±æ˜¯å¯¹å¯¹è±¡ <code>referent</code> çš„åœ°å€åšä¸ª <code>hash</code>ï¼Œç„¶åå’Œ <code>weak_table-&gt;mask</code> åš<code>ä¸</code>æ“ä½œï¼Œè¿”å›çš„ç»“æœå°äº <code>weak_table-&gt;mask</code> ï¼Œå½“åšæ•°ç»„çš„ç´¢å¼•ã€‚</p>
<p><code>hash_displacement</code> è®°å½•çš„å°±æ˜¯æœ€ä½³ä½ç½®å’Œå®é™…å­˜å‚¨ä½ç½®çš„åç§»é‡ã€‚</p>
<pre><code class="language-cpp">static void weak_entry_insert(weak_table_t *weak_table, weak_entry_t *new_entry)
{
    weak_entry_t *weak_entries = weak_table-&gt;weak_entries;
    assert(weak_entries != nil);

    // é€šè¿‡ hash å†³å®š ç´¢å¼•
    size_t index = hash_pointer(new_entry-&gt;referent) &amp; (weak_table-&gt;mask);
    size_t hash_displacement = 0;
    
    // å¦‚æœè¯¥ç´¢å¼•ä¸­å·²ç»æœ‰ entryï¼Œé‚£ä¹ˆè¿™ä¸ªç´¢å¼•å°±ä¸èƒ½ç”¨äº†ï¼Œå°±æ‰¾ä¸‹ä¸€ä¸ªç´¢å¼•
    while (weak_entries[index].referent != nil) {
        index = (index+1) &amp; weak_table-&gt;mask;
        hash_displacement++;
    }

    // å°† new_entry æ”¾å…¥æŒ‡å®šçš„ç´¢å¼•ä¸­
    weak_entries[index] = *new_entry;
    weak_table-&gt;num_entries++;

    if (hash_displacement &gt; weak_table-&gt;max_hash_displacement) {
        weak_table-&gt;max_hash_displacement = hash_displacement;
    }
}
</code></pre>
<p><code>weak_entry_insert</code> å°±æ˜¯åœ¨äºŒçº§ <code>hash</code> è¡¨ä¸­æ’å…¥ä¸€ä¸ªæ–°çš„å®ä½“ <code>new_entry</code>ã€‚é€šè¿‡ <code>hash_pointer</code> æ‰¾åˆ°ä¸€ä¸ªæœ€ä½³ä½ç½® <code>index</code>ï¼Œå¦‚æœæœ€ä½³ä½ç½®å·²ç»æœ‰å†…å®¹äº†ï¼Œå°±æ¥ç€æŸ¥æ‰¾ä¸‹ä¸€ä¸ªä½ç½®ï¼Œç›´åˆ°æ‰¾åˆ°ç©ºä½ç½®ã€‚è®°å½•ä¸‹ <code>index</code>ã€‚åœ¨ <code>index</code> å¤„æ’å…¥ <code>new_entry</code>ã€‚åŒæ—¶å°† <code>num_entries</code> ç´¯åŠ  <code>1</code>ã€‚</p>
<pre><code class="language-cpp">static void append_referrer(weak_entry_t *entry, objc_object **new_referrer)
{
    // out_of_line == 0 çš„æƒ…å†µ
    if (! entry-&gt;out_of_line) {
        // Try to insert inline.
        // inline_referrers è¿˜æ”¾å¾—ä¸‹ï¼Œå°±æ”¾åœ¨ inline_referrers é‡Œ
        for (size_t i = 0; i &lt; WEAK_INLINE_COUNT; i++) {
            if (entry-&gt;inline_referrers[i] == nil) {
                entry-&gt;inline_referrers[i] = new_referrer;
                return;
            }
        }

        weak_referrer_t *new_referrers = (weak_referrer_t *)
            calloc(WEAK_INLINE_COUNT, sizeof(weak_referrer_t));
    
        
        // å°† inline_referrers å­˜çš„ 4 ä¸ªå¯¹è±¡æ‹·è´åˆ° new_referrers ä¸­
        for (size_t i = 0; i &lt; WEAK_INLINE_COUNT; i++) {
            new_referrers[i] = entry-&gt;inline_referrers[i];
        }
        entry-&gt;referrers = new_referrers;
        entry-&gt;num_refs = WEAK_INLINE_COUNT;
        entry-&gt;out_of_line = 1;
        entry-&gt;mask = WEAK_INLINE_COUNT-1;
        entry-&gt;max_hash_displacement = 0;
    }

    assert(entry-&gt;out_of_line);

    if (entry-&gt;num_refs &gt;= TABLE_SIZE(entry) * 3/4) {
        return grow_refs_and_insert(entry, new_referrer);
    }
    
    size_t index = w_hash_pointer(new_referrer) &amp; (entry-&gt;mask);
    size_t hash_displacement = 0;
    // æ‰¾åˆ°å¯ä»¥å­˜æ”¾ new_referrer çš„ç´¢å¼•ä½ç½®
    while (entry-&gt;referrers[index] != NULL) {
        index = (index+1) &amp; entry-&gt;mask;
        hash_displacement++;
    }
    if (hash_displacement &gt; entry-&gt;max_hash_displacement) {
        entry-&gt;max_hash_displacement = hash_displacement;
    }
    // å°† index å¤„çš„å¯¹è±¡æ›¿æ¢æˆ new_referrer
    weak_referrer_t &amp;ref = entry-&gt;referrers[index];
    ref = new_referrer;
    // æ€»æ•°åŠ ä¸€
    entry-&gt;num_refs++;
}
</code></pre>
<p><code>append_referrer</code> æ˜¯åœ¨ä¸‰çº§ <code>hash</code> è¡¨ <code>entry</code> ä¸­å‡ºå…¥ä¸€ä¸ªæ–°çš„å¼±å¼•ç”¨ç€ <code>new_referrer</code>ã€‚</p>
<p>åˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š</p>
<ol>
<li>å¦‚æœ <code>inline_referrers</code> æ²¡æœ‰å­˜å‚¨æ»¡ï¼Œç›´æ¥å­˜å‚¨åˆ° <code>inline_referrers</code> ä¸­ã€‚</li>
<li>å¦‚æœ <code>inline_referrers</code> ä¸ªæ•°æ˜¯4ä¸ªäº†ï¼Œå†æ’å…¥ï¼Œå°±éœ€è¦å°† <code>inline_referrers</code> æ‹·è´åˆ° <code>referrers</code>ï¼Œç„¶åè¿›å…¥ç¬¬ä¸‰æ­¥ã€‚</li>
<li>å¦‚æœ <code>referrers</code> å­˜å‚¨æ»¡äº†ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹ï¼Œç„¶åå°†æ•°æ®å­˜å‚¨åˆ° <code>referrers</code> ä¸­ã€‚</li>
</ol>
<p>å­˜å‚¨åˆ° <code>inline_referrers</code> çš„ä»£ç æ˜¯ï¼š</p>
<pre><code class="language-cpp">for (size_t i = 0; i &lt; WEAK_INLINE_COUNT; i++) {
    if (entry-&gt;inline_referrers[i] == nil) {
        entry-&gt;inline_referrers[i] = new_referrer;
        return;
    }
}
</code></pre>
<p>å­˜å‚¨å®Œæˆåï¼Œç›´æ¥è¿”å›äº†ï¼Œæ‰€ä»¥åé¢çš„ä»£ç å°±æ˜¯å­˜å‚¨åœ¨ <code>referrers</code> çš„æƒ…å†µã€‚</p>
<pre><code class="language-cpp">weak_referrer_t *new_referrers = (weak_referrer_t *)
    calloc(WEAK_INLINE_COUNT, sizeof(weak_referrer_t));
    
    
// å°† inline_referrers å­˜çš„ 4 ä¸ªå¯¹è±¡æ‹·è´åˆ° new_referrers ä¸­
for (size_t i = 0; i &lt; WEAK_INLINE_COUNT; i++) {
    new_referrers[i] = entry-&gt;inline_referrers[i];
}
entry-&gt;referrers = new_referrers;
entry-&gt;num_refs = WEAK_INLINE_COUNT;
entry-&gt;out_of_line = 1;
entry-&gt;mask = WEAK_INLINE_COUNT-1;
entry-&gt;max_hash_displacement = 0;
</code></pre>
<p>è¿™æ®µä»£ç çš„åŠŸèƒ½æ˜¯ <code>inline_referrers</code> æ­£å¥½4ä¸ªï¼Œå¦‚æœå†æ¬¡æ·»åŠ ï¼Œè‚¯å®šæ”¾ä¸ä¸‹äº†ï¼Œæ‰€ä»¥å°† <code>inline_referrers</code> ä¸­çš„æ•°æ®ç§»åˆ° <code>referrers</code> ä¸­ã€‚</p>
<pre><code class="language-cpp">if (entry-&gt;num_refs &gt;= TABLE_SIZE(entry) * 3/4) {
    return grow_refs_and_insert(entry, new_referrer);
}
</code></pre>
<p>å¦‚æœä½¿ç”¨è¶…è¿‡ <code>3/4</code>ï¼Œå°±å…ˆæ‰©å®¹ï¼Œç„¶åå†æ’å…¥ã€‚</p>
<pre><code class="language-cpp">size_t index = w_hash_pointer(new_referrer) &amp; (entry-&gt;mask);
size_t hash_displacement = 0;
// æ‰¾åˆ°å¯ä»¥å­˜æ”¾ new_referrer çš„ç´¢å¼•ä½ç½®
while (entry-&gt;referrers[index] != NULL) {
    index = (index+1) &amp; entry-&gt;mask;
    hash_displacement++;
}
if (hash_displacement &gt; entry-&gt;max_hash_displacement) {
    entry-&gt;max_hash_displacement = hash_displacement;
}
// å°† index å¤„çš„å¯¹è±¡æ›¿æ¢æˆ new_referrer
weak_referrer_t &amp;ref = entry-&gt;referrers[index];
ref = new_referrer;
// æ€»æ•°åŠ ä¸€
entry-&gt;num_refs++;
</code></pre>
<p>ä¸Šé¢çš„ä»£ç æ˜¯é€šè¿‡å¼±å¼•ç”¨ç€ <code>new_referrer</code> æ‰¾åˆ° <code>index</code> ã€‚ç„¶åä» <code>index</code> å¼€å§‹ï¼Œå¯»å€ç©ºä½ç½®ï¼Œå°† <code>new_referrer</code> æ’å…¥åˆ° <code>entry-&gt;referrers[index]</code> ä½ç½®å¤„ã€‚åŒæ—¶å°† <code>entry-&gt;num_refs</code> ç´¯åŠ ã€‚</p>
<h2><a id="%E6%80%BB%E7%BB%93" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>æ€»ç»“</h2>
<p><code>weak</code> å³æ˜¯ä¸€ä¸ªä¸‰çº§ <code>hash</code> è¡¨ã€‚</p>
<ol>
<li>ç¬¬ä¸€çº§ç”¨æ¥æé«˜æ•ˆç‡çš„ï¼Œå¯ä»¥æƒ³è±¡ï¼Œå¾ˆå¤šå¯¹è±¡ï¼Œæ”¾åˆ°ä¸€ä¸ª <code>hash</code> è¡¨ä¸­ï¼Œé™ä½äº†æ•ˆç‡ã€‚æ‰€æœ‰å°†å¤šæœ‰çš„å¯¹è±¡æ•£åˆ—åˆ°64ä¸ªè¡¨ä¸­ã€‚</li>
<li>äºŒçº§ç¼“å­˜å­˜å‚¨è¢«å¼±å¼•ç”¨çš„å¯¹è±¡ã€‚</li>
<li>ä¸‰çº§ç¼“å­˜å­˜å‚¨æŸä¸ªå¯¹è±¡çš„æ‰€æœ‰çš„å¼±å¼•ç”¨è€…ã€‚</li>
</ol>

=======

>>>>>>> b3ad68a (2023-11-26 23:56:08)
                        
                      </div>
                  </div>
                </a>
                <div class="read-more clearfix">
                  <div class="more-left left">
<<<<<<< HEAD
                  
=======
                   <a href="17001892556510.html">Read more</a>&nbsp;&nbsp; 
>>>>>>> b3ad68a (2023-11-26 23:56:08)
                    <span class="date">2020/08/26</span>
                    <span>posted in&nbsp;</span> 
          				  
          					    <span class="posted-in"><a href='OC.html'>OC</a></span>
          				   
                    

                  </div>
                  <div class="more-right right">
                  <span class="comments">
                      

                       
                  </span>
                  </div>
                </div>
              </div><!-- article -->
        
              


			<div class="row">
			  <div class="large-6 columns">
			  <p class="text-left" style="padding-top:25px;">
			   <a href="all.html">&laquo; Prev Page</a>  
			  </p>
			  </div>
			  <div class="large-6 columns">
			<p class="text-right" style="padding-top:25px;">
			 <a href="all_2.html">&raquo; Next Page</a> 
			</p>
			  </div>
			</div>
		</div>
	</div><!-- large 8 -->

 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <h1>DreamEverAfter</h1>
                <div class="site-des"></div>
                <div class="social">











  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
        
            <a href="CS.html"><strong>CS</strong></a>
        
            <a href="List.html"><strong>List</strong></a>
        
            <a href="%E6%9D%82.html"><strong>æ‚</strong></a>
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="16996865532784.html">ä¸‰æ±ç„–é”…</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="17001172774052.html">åˆ«äº†ï¼Œä¸­å›½å¤§é™†çš„Kindle</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="17001265068678.html">HomeBrewæ›´æ–°æŠ¥é”™â€œfatal- Could not resolve HEAD to a revisionâ€</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="17001892553950.html">SwiftUIåŸºæœ¬æ§ä»¶</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="17001171363865.html">LiSSAç¬¬å››ä»£è®¡æ—¶å™¨è¯´æ˜ä¹¦</a>
			      </li>
		     
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
</div>

        </section>
      </div>
    </div>



  














<style type="text/css">
figure{margin: 0;padding: 0;}
figcaption{text-align:center;}

/* PrismJS 1.14.0
 http://prismjs.com/download.html#themes=prism&languages=markup+css+clike+javascript */
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
    color: black;
    background: none;
    text-shadow: 0 1px white;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
    
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
    
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
    text-shadow: none;
    background:#b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
    text-shadow: none;
    background: #b3d4fc;
}

@media print {
    code[class*="language-"],
    pre[class*="language-"] {
        text-shadow: none;
    }
}

/* Code blocks */
pre[class*="language-"] {
    padding: 1em;
    margin: .5em 0;
    overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
    background: #F7F7F7;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
    padding: .1em;
    border-radius: .3em;
    white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
    color: slategray;
}

.token.punctuation {
    color: #999;
}

.namespace {
    opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
    color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
    color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
    color: #9a6e3a;
    background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
    color: #07a;
}

.token.function,
.token.class-name {
    color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
    color: #e90;
}

.token.important,
.token.bold {
    font-weight: bold;
}
.token.italic {
    font-style: italic;
}

.token.entity {
    cursor: help;
}


pre[class*="language-"].line-numbers {
    position: relative;
    padding-left: 3.8em;
    counter-reset: linenumber;
}

pre[class*="language-"].line-numbers > code {
    position: relative;
    white-space: inherit;
}

.line-numbers .line-numbers-rows {
    position: absolute;
    pointer-events: none;
    top: 0;
    font-size: 100%;
    left: -3.8em;
    width: 3em; /* works for line-numbers below 1000 lines */
    letter-spacing: -1px;
    border-right: 1px solid #999;

    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;

}

    .line-numbers-rows > span {
        pointer-events: none;
        display: block;
        counter-increment: linenumber;
    }

        .line-numbers-rows > span:before {
            content: counter(linenumber);
            color: #999;
            display: block;
            padding-right: 0.8em;
            text-align: right;
        }

</style>

  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>



  </body>
</html>
