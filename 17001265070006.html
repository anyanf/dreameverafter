<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ(ç¬¬äºŒç‰ˆ) å®¶åº­ä½œä¸š ç¬¬äºŒç«  - DreamEverAfter
  
  </title>
 <meta name="description" content="">
 <link href="atom.xml" rel="alternate" title="DreamEverAfter" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />

    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
    <script src="asset/highlightjs/highlight.pack.js"></script>
    <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
    <script>hljs.initHighlightingOnLoad();</script>
    
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>

<div id="header">
    <h1><a href="index.html">DreamEverAfter</a></h1>
</div>

</nav>
        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; DreamEverAfter</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
      <li><a href="index.html">Home</a></li>
      
        <li class="divider"></li>
        <li><label>èœè°±</label></li>

          
            <li><a title="ä¸‰æ±ç„–é”…" href="16996865532784.html">ä¸‰æ±ç„–é”…</a></li>
          

      
        <li class="divider"></li>
        <li><label>List</label></li>

          
            <li><a title="æ°´ä»™ ğŸŒ¼" href="17001150891969.html">æ°´ä»™ ğŸŒ¼</a></li>
          

      
        <li class="divider"></li>
        <li><label>æ‚</label></li>

          
            <li><a title="åˆ«äº†ï¼Œä¸­å›½å¤§é™†çš„Kindle" href="17001172774052.html">åˆ«äº†ï¼Œä¸­å›½å¤§é™†çš„Kindle</a></li>
          
            <li><a title="LiSSAç¬¬å››ä»£è®¡æ—¶å™¨è¯´æ˜ä¹¦" href="17001171363865.html">LiSSAç¬¬å››ä»£è®¡æ—¶å™¨è¯´æ˜ä¹¦</a></li>
          
            <li><a title="è§‚ã€Šè§‚å±±æµ·ã€‹" href="17001174083229.html">è§‚ã€Šè§‚å±±æµ·ã€‹</a></li>
          
            <li><a title="ã€Šåä¸‡å¬‰çš®ã€‹" href="17001174848432.html">ã€Šåä¸‡å¬‰çš®ã€‹</a></li>
          
            <li><a title="ç¦»éªš" href="17001173766480.html">ç¦»éªš</a></li>
          
            <li><a title="äººä¸ºä»€ä¹ˆä¼šè¿‡åˆ†è‡ªä¿¡" href="17001161339218.html">äººä¸ºä»€ä¹ˆä¼šè¿‡åˆ†è‡ªä¿¡</a></li>
          
            <li><a title="æ­£ç¡®çš„æ¡ç¬”å§¿åŠ¿" href="17001175328385.html">æ­£ç¡®çš„æ¡ç¬”å§¿åŠ¿</a></li>
          

      
        <li class="divider"></li>
        <li><label>CS</label></li>

          
            <li><a title="HomeBrewæ›´æ–°æŠ¥é”™â€œfatal- Could not resolve HEAD to a revisionâ€" href="17001265068678.html">HomeBrewæ›´æ–°æŠ¥é”™â€œfatal- Could not resolve HEAD to a revisionâ€</a></li>
          
            <li><a title="OpenGL æœ¯è¯­" href="17001265069754.html">OpenGL æœ¯è¯­</a></li>
          
            <li><a title="å‘½ä»¤è¡Œé€šè¿‡ffmpegå‰ªåˆ‡è§†é¢‘" href="17001265069516.html">å‘½ä»¤è¡Œé€šè¿‡ffmpegå‰ªåˆ‡è§†é¢‘</a></li>
          
            <li><a title="CMakeå…¥é—¨åŠå¸¸ç”¨å˜é‡æŒ‡ä»¤æ‰‹å†Œ" href="17001196451067.html">CMakeå…¥é—¨åŠå¸¸ç”¨å˜é‡æŒ‡ä»¤æ‰‹å†Œ</a></li>
          
            <li><a title="MeshLab" href="17001265069165.html">MeshLab</a></li>
          
            <li><a title="centos7 mysqlæ•°æ®åº“å®‰è£…å’Œé…ç½®" href="17001188677503.html">centos7 mysqlæ•°æ®åº“å®‰è£…å’Œé…ç½®</a></li>
          
            <li><a title="è§£å†³Macä¸‹Cornerstoneæ— æ³•æŸ¥çœ‹SVNæ—¥å¿—çš„é—®é¢˜" href="17001197697594.html">è§£å†³Macä¸‹Cornerstoneæ— æ³•æŸ¥çœ‹SVNæ—¥å¿—çš„é—®é¢˜</a></li>
          
            <li><a title="WxWidgetsç±»åˆ—è¡¨" href="17001265068913.html">WxWidgetsç±»åˆ—è¡¨</a></li>
          
            <li><a title="åœ¨ Mac OS X ä¸Šå®‰è£… TensorFlow" href="17001182998798.html">åœ¨ Mac OS X ä¸Šå®‰è£… TensorFlow</a></li>
          
            <li><a title="è™šæ‹Ÿæœº Linux ä¸Šç¼– slice3r perl Build.PL æŠ¥é”™" href="17001265069881.html">è™šæ‹Ÿæœº Linux ä¸Šç¼– slice3r perl Build.PL æŠ¥é”™</a></li>
          
            <li><a title="å‡çº§ Mac OS  10.13 High Sierra å ruby æŠ¥é”™" href="17001265069032.html">å‡çº§ Mac OS  10.13 High Sierra å ruby æŠ¥é”™</a></li>
          
            <li><a title="SQLè¯­å¥çš„è¯­æ³•" href="17001180357944.html">SQLè¯­å¥çš„è¯­æ³•</a></li>
          
            <li><a title="é›¶å®½ç©ºæ ¼ - å¦‚å¹½çµä¸€èˆ¬çš„ç©ºæ ¼" href="17001265068802.html">é›¶å®½ç©ºæ ¼ - å¦‚å¹½çµä¸€èˆ¬çš„ç©ºæ ¼</a></li>
          
            <li><a title="HTTPè¯·æ±‚æŠ¥æ–‡å’ŒHTTPå“åº”æŠ¥æ–‡,ä»¥åŠå·¥ä½œåŸç†" href="17001181867505.html">HTTPè¯·æ±‚æŠ¥æ–‡å’ŒHTTPå“åº”æŠ¥æ–‡,ä»¥åŠå·¥ä½œåŸç†</a></li>
          
            <li><a title="Vim å¿«æ·é”®æ•´ç†" href="17001265069634.html">Vim å¿«æ·é”®æ•´ç†</a></li>
          
            <li><a title="Git å‘½ä»¤" href="17001265069390.html">Git å‘½ä»¤</a></li>
          
            <li><a title="MAC OS X å¸¸ç”¨æŠ€å·§" href="17001265069283.html">MAC OS X å¸¸ç”¨æŠ€å·§</a></li>
          
            <li><a title="ä»£ç é‡æ„" href="17001197235131.html">ä»£ç é‡æ„</a></li>
          

      
      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>

        <section id="main-content" role="main" class="scroll-container">

          <div class="row">
            <div class="large-3 medium-3 columns">
              <div class="hide-for-small">
                <div class="sidebar">
                <nav>
                  <ul id="side-nav" class="side-nav">

                    
                      <li class="side-title"><span>èœè°±</span></li>
                        
                          <li><a title="ä¸‰æ±ç„–é”…" href="16996865532784.html">ä¸‰æ±ç„–é”…</a></li>
                        

                    
                      <li class="side-title"><span>List</span></li>
                        
                          <li><a title="æ°´ä»™ ğŸŒ¼" href="17001150891969.html">æ°´ä»™ ğŸŒ¼</a></li>
                        

                    
                      <li class="side-title"><span>æ‚</span></li>
                        
                          <li><a title="åˆ«äº†ï¼Œä¸­å›½å¤§é™†çš„Kindle" href="17001172774052.html">åˆ«äº†ï¼Œä¸­å›½å¤§é™†çš„Kindle</a></li>
                        
                          <li><a title="LiSSAç¬¬å››ä»£è®¡æ—¶å™¨è¯´æ˜ä¹¦" href="17001171363865.html">LiSSAç¬¬å››ä»£è®¡æ—¶å™¨è¯´æ˜ä¹¦</a></li>
                        
                          <li><a title="è§‚ã€Šè§‚å±±æµ·ã€‹" href="17001174083229.html">è§‚ã€Šè§‚å±±æµ·ã€‹</a></li>
                        
                          <li><a title="ã€Šåä¸‡å¬‰çš®ã€‹" href="17001174848432.html">ã€Šåä¸‡å¬‰çš®ã€‹</a></li>
                        
                          <li><a title="ç¦»éªš" href="17001173766480.html">ç¦»éªš</a></li>
                        
                          <li><a title="äººä¸ºä»€ä¹ˆä¼šè¿‡åˆ†è‡ªä¿¡" href="17001161339218.html">äººä¸ºä»€ä¹ˆä¼šè¿‡åˆ†è‡ªä¿¡</a></li>
                        
                          <li><a title="æ­£ç¡®çš„æ¡ç¬”å§¿åŠ¿" href="17001175328385.html">æ­£ç¡®çš„æ¡ç¬”å§¿åŠ¿</a></li>
                        

                    
                      <li class="side-title"><span>CS</span></li>
                        
                          <li><a title="HomeBrewæ›´æ–°æŠ¥é”™â€œfatal- Could not resolve HEAD to a revisionâ€" href="17001265068678.html">HomeBrewæ›´æ–°æŠ¥é”™â€œfatal- Could not resolve HEAD to a revisionâ€</a></li>
                        
                          <li><a title="OpenGL æœ¯è¯­" href="17001265069754.html">OpenGL æœ¯è¯­</a></li>
                        
                          <li><a title="å‘½ä»¤è¡Œé€šè¿‡ffmpegå‰ªåˆ‡è§†é¢‘" href="17001265069516.html">å‘½ä»¤è¡Œé€šè¿‡ffmpegå‰ªåˆ‡è§†é¢‘</a></li>
                        
                          <li><a title="CMakeå…¥é—¨åŠå¸¸ç”¨å˜é‡æŒ‡ä»¤æ‰‹å†Œ" href="17001196451067.html">CMakeå…¥é—¨åŠå¸¸ç”¨å˜é‡æŒ‡ä»¤æ‰‹å†Œ</a></li>
                        
                          <li><a title="MeshLab" href="17001265069165.html">MeshLab</a></li>
                        
                          <li><a title="centos7 mysqlæ•°æ®åº“å®‰è£…å’Œé…ç½®" href="17001188677503.html">centos7 mysqlæ•°æ®åº“å®‰è£…å’Œé…ç½®</a></li>
                        
                          <li><a title="è§£å†³Macä¸‹Cornerstoneæ— æ³•æŸ¥çœ‹SVNæ—¥å¿—çš„é—®é¢˜" href="17001197697594.html">è§£å†³Macä¸‹Cornerstoneæ— æ³•æŸ¥çœ‹SVNæ—¥å¿—çš„é—®é¢˜</a></li>
                        
                          <li><a title="WxWidgetsç±»åˆ—è¡¨" href="17001265068913.html">WxWidgetsç±»åˆ—è¡¨</a></li>
                        
                          <li><a title="åœ¨ Mac OS X ä¸Šå®‰è£… TensorFlow" href="17001182998798.html">åœ¨ Mac OS X ä¸Šå®‰è£… TensorFlow</a></li>
                        
                          <li><a title="è™šæ‹Ÿæœº Linux ä¸Šç¼– slice3r perl Build.PL æŠ¥é”™" href="17001265069881.html">è™šæ‹Ÿæœº Linux ä¸Šç¼– slice3r perl Build.PL æŠ¥é”™</a></li>
                        
                          <li><a title="å‡çº§ Mac OS  10.13 High Sierra å ruby æŠ¥é”™" href="17001265069032.html">å‡çº§ Mac OS  10.13 High Sierra å ruby æŠ¥é”™</a></li>
                        
                          <li><a title="SQLè¯­å¥çš„è¯­æ³•" href="17001180357944.html">SQLè¯­å¥çš„è¯­æ³•</a></li>
                        
                          <li><a title="é›¶å®½ç©ºæ ¼ - å¦‚å¹½çµä¸€èˆ¬çš„ç©ºæ ¼" href="17001265068802.html">é›¶å®½ç©ºæ ¼ - å¦‚å¹½çµä¸€èˆ¬çš„ç©ºæ ¼</a></li>
                        
                          <li><a title="HTTPè¯·æ±‚æŠ¥æ–‡å’ŒHTTPå“åº”æŠ¥æ–‡,ä»¥åŠå·¥ä½œåŸç†" href="17001181867505.html">HTTPè¯·æ±‚æŠ¥æ–‡å’ŒHTTPå“åº”æŠ¥æ–‡,ä»¥åŠå·¥ä½œåŸç†</a></li>
                        
                          <li><a title="Vim å¿«æ·é”®æ•´ç†" href="17001265069634.html">Vim å¿«æ·é”®æ•´ç†</a></li>
                        
                          <li><a title="Git å‘½ä»¤" href="17001265069390.html">Git å‘½ä»¤</a></li>
                        
                          <li><a title="MAC OS X å¸¸ç”¨æŠ€å·§" href="17001265069283.html">MAC OS X å¸¸ç”¨æŠ€å·§</a></li>
                        
                          <li><a title="ä»£ç é‡æ„" href="17001197235131.html">ä»£ç é‡æ„</a></li>
                        

                    
                  </ul>
                </nav>
                </div>
              </div>
            </div>
            <div class="large-9 medium-9 columns">

 <div class="markdown-body">
<h1>æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ(ç¬¬äºŒç‰ˆ) å®¶åº­ä½œä¸š ç¬¬äºŒç« </h1>

<p>æ­£åœ¨çœ‹ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹è¿™æœ¬ä¹¦ï¼Œè¯¾åèŒ«èŒ«å¤šçš„ä¹ é¢˜ï¼Œçœ‹ç€å°±è®©äººå‘æ€µã€‚ã€‚</p>
<p>åšçš„æ—¶å€™ä¹Ÿéœ€è¦éªŒè¯ä¸€ä¸‹å¯¹é”™ï¼Œæ‰€ä»¥åœ¨ç½‘ä¸Šæ‰¾äº†å¾ˆå¤šç›¸å…³çš„é¢˜è§£ã€‚é¡ºä¾¿å°±åœ¨è¿™é‡Œè®°ä¸€ä¸‹äº†ã€‚</p>
<p>å…ˆæ”¾ä¸€ä¸‹æºç åœ°å€ï¼š</p>
<p><a href="http://csapp.cs.cmu.edu/2e/code.html">Code Examples</a></p>
<p>ç¬¬äºŒç« å„ç§ç¼–ç å’Œç»•æ¥å¥—å–çš„è®¡ç®—å½“æ—¶å·®ç‚¹æŠŠæˆ‘åŠé€€ï¼Œåšä¸ªå°ç»“å°±æ˜¯ä¸€èˆ¬æ¥è¯´æ•´æ•°ç”¨è¡¥ç ç¼–ç ï¼Œæµ®ç‚¹æ•°ç”¨ IEEE æµ®ç‚¹ç¼–ç ï¼Œå’Œå°å¿ƒç²¾åº¦é—®é¢˜ã€‚</p>
<h2><a id="2-55" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.55</h2>
<p>å…ˆä¸Š show-bytes.c æºç ï¼š</p>
<pre><code class="language-c">/* $begin show-bytes */
#include &lt;stdio.h&gt;
/* $end show-bytes */
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
/* $begin show-bytes */

typedef unsigned char *byte_pointer;

void show_bytes(byte_pointer start, int len) {
    int i;
    for (i = 0; i &lt; len; i++)
	printf(&quot; %.2x&quot;, start[i]);    //line:data:show_bytes_printf
    printf(&quot;\n&quot;);
}

void show_int(int x) {
    show_bytes((byte_pointer) &amp;x, sizeof(int)); //line:data:show_bytes_amp1
}

void show_float(float x) {
    show_bytes((byte_pointer) &amp;x, sizeof(float)); //line:data:show_bytes_amp2
}

void show_pointer(void *x) {
    show_bytes((byte_pointer) &amp;x, sizeof(void *)); //line:data:show_bytes_amp3
}
/* $end show-bytes */


/* $begin test-show-bytes */
void test_show_bytes(int val) {
    int ival = val;
    float fval = (float) ival;
    int *pval = &amp;ival;
    show_int(ival);
    show_float(fval);
    show_pointer(pval);
}
/* $end test-show-bytes */

void simple_show_a() {
/* $begin simple-show-a */
int val = 0x87654321;
byte_pointer valp = (byte_pointer) &amp;val;
show_bytes(valp, 1); /* A. */
show_bytes(valp, 2); /* B. */
show_bytes(valp, 3); /* C. */
/* $end simple-show-a */
}

void simple_show_b() {
/* $begin simple-show-b */
int val = 0x12345678;
byte_pointer valp = (byte_pointer) &amp;val;
show_bytes(valp, 1); /* A. */
show_bytes(valp, 2); /* B. */
show_bytes(valp, 3); /* C. */
/* $end simple-show-b */
}

void float_eg() {
  int x = 3490593;
  float f = (float) x;
  printf(&quot;For x = %d\n&quot;, x);
  show_int(x);
  show_float(f);

  x = 3510593;
  f = (float) x;
  printf(&quot;For x = %d\n&quot;, x);
  show_int(x);
  show_float(f);

}

void string_ueg() {
/* $begin show-ustring */
const char *s = &quot;ABCDEF&quot;;
show_bytes((byte_pointer) s, strlen(s)); 
/* $end show-ustring */
}

void string_leg() {
/* $begin show-lstring */
const char *s = &quot;abcdef&quot;;
show_bytes((byte_pointer) s, strlen(s)); 
/* $end show-lstring */
}

void show_twocomp() 
{
/* $begin show-twocomp */
    short x = 12345; 
    short mx = -x; 
    
    show_bytes((byte_pointer) &amp;x, sizeof(short)); 
    show_bytes((byte_pointer) &amp;mx, sizeof(short)); 
/* $end show-twocomp */
}

int main(int argc, char *argv[])
{
    int val = 12345;

    if (argc &gt; 1) {
        if (argc &gt; 1) {
            val = strtol(argv[1], NULL, 0);
        }
        printf(&quot;calling test_show_bytes\n&quot;);
        test_show_bytes(val);
    } else {
        printf(&quot;calling show_twocomp\n&quot;);
        show_twocomp();
        printf(&quot;Calling simple_show_a\n&quot;);
        simple_show_a();
        printf(&quot;Calling simple_show_b\n&quot;);
        simple_show_b();
        printf(&quot;Calling float_eg\n&quot;);
        float_eg();
        printf(&quot;Calling string_ueg\n&quot;);
        string_ueg();
        printf(&quot;Calling string_leg\n&quot;);
        string_leg();
    }
    return 0;
}

</code></pre>
<p>ç”¨ GCC ç¼–è¯‘ï¼š</p>
<pre><code class="language-shell">// mac os 11.1
gcc -m64 show-bytes.c -o show-bytes
</code></pre>
<p>run ä¸€ä¸‹ï¼š</p>
<pre><code class="language-shell">./show-bytes
</code></pre>
<p>è¾“å‡ºï¼š</p>
<pre><code class="language-shell">calling show_twocomp
 39 30
 c7 cf
Calling simple_show_a
 21
 21 43
 21 43 65
Calling simple_show_b
 78
 78 56
 78 56 34
Calling float_eg
For x = 3490593
 21 43 35 00
 84 0c 55 4a
For x = 3510593
 41 91 35 00
 04 45 56 4a
Calling string_ueg
 41 42 43 44 45 46
Calling string_leg
 61 62 63 64 65 66
</code></pre>
<h2><a id="2-56" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.56</h2>
<p>å¯ä»¥åœ¨åé¢åŠ å‚æ•°ï¼Œå°±å¯ä»¥è¯•ä¸åŒçš„ç¤ºä¾‹å€¼äº†ï¼š</p>
<pre><code class="language-shell">// è¾“å…¥
./show-bytes 1

// è¾“å‡º é¡ºä¾¿çœ‹å‡ºæ¥æ˜¯å°ç«¯æ¨¡å¼ã€‚
calling test_show_bytes
 01 00 00 00
 00 00 80 3f
 58 f9 14 e4 fe 7f 00 00

// è¾“å…¥
./show-bytes 996

// è¾“å‡º
calling test_show_bytes
 e4 03 00 00
 00 00 79 44
 58 79 ad ec fe 7f 00 00

</code></pre>
<h2><a id="2-57" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.57</h2>
<p>å¢åŠ ä¸‰ä¸ªå‡½æ•°å¹¶ä¿®æ”¹æµ‹è¯•å‡½æ•°ï¼š</p>
<pre><code class="language-c">void show_short(short x) {
  show_bytes((byte_pointer) &amp;x, sizeof(short));
}

void show_long(long x) {
  show_bytes((byte_pointer) &amp;x, sizeof(long));
}

void show_double(double x) {
  show_bytes((byte_pointer) &amp;x, sizeof(double));
}

void test_show_bytes(int val) {
    int ival = val;
    float fval = (float) ival;
    int *pval = &amp;ival;
    
    show_int(ival);
    show_float(fval);
    show_pointer(pval);
    
    short sval = (short) ival;
    long lval = (long) ival;
    double dval = (double) ival;

    show_short(sval);
    show_long(lval);
    show_double(dval);
}
</code></pre>
<p>é‡æ–°ç¼–è¯‘ï¼Œæµ‹è¯•ç»“æœå¦‚ä¸‹ï¼Œæ³¨æ„æœ€åä¸‰è¡Œè¾“å‡ºæ˜¯æ–°åŠ çš„ï¼š</p>
<pre><code class="language-shell">// è¾“å…¥
./show-bytes 1

// è¾“å‡º
calling test_show_bytes
 01 00 00 00
 00 00 80 3f
 58 39 b0 e5 fe 7f 00 00
 01 00
 01 00 00 00 00 00 00 00
 00 00 00 00 00 00 f0 3f

// è¾“å…¥
./show-bytes 996

// è¾“å‡º
calling test_show_bytes
 e4 03 00 00
 00 00 79 44
 58 a9 35 ed fe 7f 00 00
 e4 03
 e4 03 00 00 00 00 00 00
 00 00 00 00 00 20 8f 40

</code></pre>
<h2><a id="2-58" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.58</h2>
<pre><code class="language-c">/*
 * is-little-endian.c
 */

#include &lt;stdio.h&gt;
#include &lt;assert.h&gt;

typedef unsigned char* byte_pointer;

int is_little_endian() {
  int test_num = 0xff;
  byte_pointer byte_start = (byte_pointer) &amp;test_num;

  if (byte_start[0] == 0xff) {
    return 1;
  }
  return 0;
}

int is_little_endian_other(){
    int a = 1;
    return *((char*)&amp;a);
}

int main(int argc, char* argv[]) {
  assert(is_little_endian());
  return 0;
}
</code></pre>
<h2><a id="2-59" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.59</h2>
<pre><code class="language-c">(x &amp; 0xFF) | (y &amp; ~0xFF)
</code></pre>
<h2><a id="2-60" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.60</h2>
<pre><code class="language-c">
/*
 * replace-byte.c
 */

#include &lt;stdio.h&gt;
#include &lt;assert.h&gt;

unsigned replace_byte(unsigned x, int i, unsigned char b) {
  if (i &lt; 0) {
    printf(&quot;error: i is negetive\n&quot;);
    return x;
  }
  if (i &gt; sizeof(unsigned)-1) {
    printf(&quot;error: too big i&quot;);
    return x;
  }

  // 1 byte æœ‰ 8 bitsï¼Œ &lt;&lt; 3 å°±æ˜¯ * 8
  unsigned mask = ((unsigned) 0xFF) &lt;&lt; (i &lt;&lt; 3);
  unsigned pos_byte = ((unsigned) b) &lt;&lt; (i &lt;&lt; 3);

  return (x &amp; ~mask) | pos_byte;
}

int main(int argc, char *argv[]) {
  unsigned rep_0 = replace_byte(0x12345678, 0, 0xAB);
  unsigned rep_3 = replace_byte(0x12345678, 3, 0xAB);

  assert(rep_0 == 0x123456AB);
  assert(rep_3 == 0xAB345678);
  return 0;
}

</code></pre>
<h2><a id="2-61" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.61</h2>
<pre><code class="language-c">
// A x çš„ä»»ä½•ä½éƒ½ç­‰äº 1
!~x

// B x çš„ä»»ä½•ä½éƒ½ç­‰äº 0
!x

// C x çš„æœ€é«˜æœ‰æ•ˆå­—èŠ‚ä¸­çš„ä½éƒ½ç­‰äº 1
!~(x &gt;&gt; ((sizeof(int) - 1) &lt;&lt; 3))

// D x çš„æœ€ä½æœ‰æ•ˆå­—èŠ‚ä¸­çš„ä½éƒ½ç­‰äº 0
!(x &amp; 0xFF)

</code></pre>
<h2><a id="2-62" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.62</h2>
<pre><code class="language-c">/*
 * int-shifts-are-arithemetic.c
 */

#include &lt;stdio.h&gt;
#include &lt;assert.h&gt;

int int_shifts_are_arithemetic() {
  int num = -1;
  return !(num ^ (num &gt;&gt; 1));
}

int main(int argc, char* argv[]) {
  assert(int_shifts_are_arithemetic());
  return 0;
}
</code></pre>
<h2><a id="2-63" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.63</h2>
<pre><code class="language-c">/*
 * srl-sra.c
 */

#include &lt;stdio.h&gt;
#include &lt;assert.h&gt;

// å°† xrsl çš„ç¬¬ w-k-1 ä½æ‰©å±•åˆ°å‰ k ä¸ªé«˜ä½
int sra(int x, int k) {
  int xsrl = (unsigned) x &gt;&gt; k;

  int w = sizeof(int) &lt;&lt; 3;
  // mask çš„å‰ k é«˜ä½å…¨æ˜¯ 1
  int mask = (int) -1 &lt;&lt; (w - k);
  // m æœ€é«˜ä½æ˜¯ 1ï¼Œå…¶ä»–éƒ½æ˜¯ 0
  int m = 1 &lt;&lt; (w - 1);
  // x &amp; mï¼Œç¡®å®šç¬¦å·ä½æ˜¯ 1 è¿˜æ˜¯ 0ã€‚
  // ç„¶åå¦‚æœç¬¦å·ä½æ˜¯ 1ï¼Œ!(x &amp; m) ä¸º 0ï¼Œ0 - 1 ç­‰äº -1ï¼Œmask &amp;= -1 è¿˜æ˜¯ä»–æœ¬èº«ã€‚
  // å¦‚æœç¬¦å·ä½æ˜¯ 0ï¼Œ!(x &amp; m) ä¸º 1ï¼Œ1 - 1 ç­‰äº 0ï¼Œmask &amp;= 0 ä¸º 0ã€‚
  mask &amp;= !(x &amp; m) - 1;
  return xsrl | mask;
}

// å‰ k é«˜ä½æ¸…é›¶å³å¯
unsigned srl(unsigned x, int k) {
  unsigned xsra = (int) x &gt;&gt; k;

  int w = sizeof(int) &lt;&lt; 3;
  int mask = (int) -1 &lt;&lt; (w - k);
  return xsra &amp; ~mask;
}

int main(int argc, char* argv[]) {
  unsigned test_unsigned = 0x12345678;
  int test_int = 0x12345678;

  assert(srl(test_unsigned, 4) == test_unsigned &gt;&gt; 4);
  assert(sra(test_int, 4) == test_int &gt;&gt; 4);

  test_unsigned = 0x87654321;
    test_int = 0x87654321;

    assert (srl (test_unsigned, 4) == test_unsigned &gt;&gt; 4);
    assert (sra (test_int, 4) == test_int &gt;&gt; 4);

  return 0;
}
</code></pre>
<h2><a id="2-64" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.64</h2>
<pre><code class="language-c">int any_even_one(unsigned x) {
    return !!(0x55555555 &amp; x);
}
</code></pre>
<h2><a id="2-65" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.65</h2>
<pre><code class="language-c">// x çš„æ¯ä¸ªä½è¿›è¡Œå¼‚æˆ–ï¼Œå¦‚æœä¸º 0 å°±è¯´æ˜æ˜¯å¶æ•°ä¸ª 1ï¼Œå¦‚æœä¸º 1 å°±æ˜¯å¥‡æ•°ä¸ª 1 ã€‚
// é€šè¿‡ç®—æ•°å³ç§»ä¸€åŠçš„ä½æ•°ï¼Œç›¸å½“äºæŠŠå·¦åŠéƒ¨åˆ†ä½æ•°é™ä½åˆ°å’Œå³åŠéƒ¨åˆ†ä¸€è‡´ï¼Œåªå…³å¿ƒå³åŠéƒ¨åˆ†å¼‚æˆ–ç»“æœå°±å¥½ã€‚
int even_ones(unsigned x){
    x ^= (x &gt;&gt; 16);
    x ^= (x &gt;&gt; 8);
    x ^= (x &gt;&gt; 4);
    x ^= (x &gt;&gt; 2);
    x ^= (x &gt;&gt; 1);
    return !(x &amp; 1);
} 
</code></pre>
<h2><a id="2-66" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.66</h2>
<p>å®ç°æ©è†œï¼Œæ•°ä½ä¸­åªå‰©ä¸‹æœ€å·¦è¾¹çš„ 1ï¼Œå…¶ä»–ä½éƒ½æ˜¯ 0ã€‚å¦‚æœ x ä¸º 0,é‚£ä¹ˆå‡½æ•°è¿”å› 0ã€‚</p>
<p>åˆ©ç”¨ç§»ä½æ“ä½œï¼Œé¦–å…ˆå°† x å³ç§»å†æˆ–ï¼Œåˆ†åˆ«åˆ©ç”¨<code>1,2,4,8,16</code>ï¼Œå¾—åˆ°ä»æœ€å·¦è¾¹çš„ 1 åé¢å…¨éƒ¨ä¸º 1ï¼Œç„¶åå†å³ç§»1ä½ï¼Œå–å¼‚æˆ–ã€‚</p>
<pre><code class="language-c">int leftmost_one(unsigned x) {
    x |= (x &gt;&gt; 1);
    x |= (x &gt;&gt; 2);
    x |= (x &gt;&gt; 4);
    x |= (x &gt;&gt; 8);
    x |= (x &gt;&gt; 16);
    return x^(x&gt;&gt;1);
}
</code></pre>
<h2><a id="2-67" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.67</h2>
<p>Aï¼š</p>
<p>If the value of the right operand is negative or is greater than or equal to the width of the promoted left operand, the behavior it undefined.</p>
<p>32ä½æœºå™¨ä¸Šæ²¡æœ‰å®šä¹‰ç§»ä½32æ¬¡ï¼Œæ‰€ä»¥éœ€è¦åˆ†å¤šæ¬¡å·¦ç§»ã€‚</p>
<pre><code class="language-c">/*
 * int-size-is-32.c
 */

#include &lt;stdio.h&gt;
#include &lt;assert.h&gt;

/* The following function does not run properly on some machine */
/*
int bad_int_size_is_32() {
  int set_msb = 1 &lt;&lt; 31;
  int beyond_msb = 1 &lt;&lt; 32;

  return set_msb &amp;&amp; !beyond_msb;
}
*/

int int_size_is_32() {
  int set_msb = 1 &lt;&lt; 31;
  int beyond_msb = set_msb &lt;&lt; 1;

  return set_msb &amp;&amp; !beyond_msb;
}

int int_size_is_32_for_16bit() {
  int set_msb = 1 &lt;&lt; 15 &lt;&lt; 15 &lt;&lt; 1;
  int beyond_msb = set_msb &lt;&lt; 1;

  return set_msb &amp;&amp; !beyond_msb;
}

int main(int argc, char *argv[]) {
  assert(int_size_is_32());
  assert(int_size_is_32_for_16bit());
  return 0;
}

</code></pre>
<h2><a id="2-68" class="anchor" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.68</h2>
<p>è®© x çš„æœ€ä½ n ä½å˜ 1ã€‚</p>
<pre><code class="language-c">/*
 * lower-one-mask.c
 */
#include &lt;stdio.h&gt;
#include &lt;assert.h&gt;

/*
 * Mask with least signficant n bits set to 1
 * Example: n = 6 -&gt; 0x3F, n = 17 -&gt; 0x1FFFF
 * Assume 1 &lt;= n &lt;= w
 */
int lower_one_mask(int n) {
  int w = sizeof(int) &lt;&lt; 3;
  return (unsigned) -1 &gt;&gt; (w - n);
}

int main(int argc, char* argv[]) {
  assert(lower_one_mask(6) == 0x3F);
  assert(lower_one_mask(17) == 0x1FFFF);
  assert(lower_one_mask(32) == 0xFFFFFFFF);
  return 0;
}
</code></pre>


</div>

<br /><br />
<hr />

<div class="row clearfix">
  <div class="large-6 columns">
	<div class="text-left" style="padding:15px 0px;">
		
	        <a href="17001174083229.html"  title="Previous Post: è§‚ã€Šè§‚å±±æµ·ã€‹">&laquo; è§‚ã€Šè§‚å±±æµ·ã€‹</a>
	    
	</div>
  </div>
  <div class="large-6 columns">
	<div class="text-right" style="padding:15px 0px;">
		
	        <a href="17001150891969.html" 
	        title="Next Post: æ°´ä»™ ğŸŒ¼">æ°´ä»™ ğŸŒ¼ &raquo;</a>
	    
	</div>
  </div>
</div>

<div class="row">
<div style="padding:0px 0.93em;" class="share-comments">

</div>
</div>
<script type="text/javascript">
	$(function(){
		var currentURL = '17001265070006.html';
		$('#side-nav a').each(function(){
			if($(this).attr('href') == currentURL){
				$(this).parent().addClass('active');
			}
		});
	});
</script>  
</div></div>


<div class="page-bottom">
  <div class="row">
  <hr />
  <div class="small-9 columns">
  <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
  <div class="small-3 columns">
  <p class="copyright text-right"><a href="#header">TOP</a></p>
  </div>
   
  </div>
</div>

        </section>
      </div>
    </div>
    



  













<script src="asset/prism.js"></script>


<style type="text/css">
figure{margin: 0.4em 0;padding: 0;}
  figcaption{text-align:center;}

/* PrismJS 1.14.0
 http://prismjs.com/download.html#themes=prism&languages=markup+css+clike+javascript */
/**
 * prism.js default theme for JavaScript, CSS and HTML
 * Based on dabblet (http://dabblet.com)
 * @author Lea Verou
 */

code[class*="language-"],
pre[class*="language-"] {
    color: black;
    background: none;
    text-shadow: 0 1px white;
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
    
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
    
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;
}

pre[class*="language-"]::-moz-selection, pre[class*="language-"] ::-moz-selection,
code[class*="language-"]::-moz-selection, code[class*="language-"] ::-moz-selection {
    text-shadow: none;
    background:#b3d4fc;
}

pre[class*="language-"]::selection, pre[class*="language-"] ::selection,
code[class*="language-"]::selection, code[class*="language-"] ::selection {
    text-shadow: none;
    background: #b3d4fc;
}

@media print {
    code[class*="language-"],
    pre[class*="language-"] {
        text-shadow: none;
    }
}

/* Code blocks */
pre[class*="language-"] {
    padding: 1em;
    margin: .5em 0;
    overflow: auto;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
    background: #F7F7F7;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
    padding: .1em;
    border-radius: .3em;
    white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
    color: slategray;
}

.token.punctuation {
    color: #999;
}

.namespace {
    opacity: .7;
}

.token.property,
.token.tag,
.token.boolean,
.token.number,
.token.constant,
.token.symbol,
.token.deleted {
    color: #905;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
    color: #690;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string {
    color: #9a6e3a;
    background: hsla(0, 0%, 100%, .5);
}

.token.atrule,
.token.attr-value,
.token.keyword {
    color: #07a;
}

.token.function,
.token.class-name {
    color: #DD4A68;
}

.token.regex,
.token.important,
.token.variable {
    color: #e90;
}

.token.important,
.token.bold {
    font-weight: bold;
}
.token.italic {
    font-style: italic;
}

.token.entity {
    cursor: help;
}


pre[class*="language-"].line-numbers {
    position: relative;
    padding-left: 3.8em;
    counter-reset: linenumber;
}

pre[class*="language-"].line-numbers > code {
    position: relative;
    white-space: inherit;
}

.line-numbers .line-numbers-rows {
    position: absolute;
    pointer-events: none;
    top: 0;
    font-size: 100%;
    left: -3.8em;
    width: 3em; /* works for line-numbers below 1000 lines */
    letter-spacing: -1px;
    border-right: 1px solid #999;

    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;

}

    .line-numbers-rows > span {
        pointer-events: none;
        display: block;
        counter-increment: linenumber;
    }

        .line-numbers-rows > span:before {
            content: counter(linenumber);
            color: #999;
            display: block;
            padding-right: 0.8em;
            text-align: right;
        }


</style>
    
    <script src="asset/js/foundation.min.js"></script>
    <script src="asset/js/foundation/foundation.offcanvas.js"></script>
    <script>
      $(document).foundation();

     
    </script>


  </body>
</html>
